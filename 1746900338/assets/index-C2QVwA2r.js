import{j as e,r as x}from"./index-BpkY95s5.js";import{d as m}from"./index-CsSXPTiX.js";import{J as g,j as y,cm as j,aM as C}from"./index-BfoPMZps.js";import{I as _,S as f}from"./common-Dlz47lLh.js";import{P as F}from"./index-Diud7tU2.js";d.defaultProps={className:"",color:"",onClick:()=>{},fontSize:36};function d({name:s,color:n,onClick:i,fontSize:l,className:a=""}){return e.jsx("span",{style:{color:n,width:`${l}px`,height:`${l}px`,display:"block",fontSize:`${l}px`},onClick:o=>{i&&i(o)},className:g("iconfont",`icon-${s}`,a)})}const N="_advanceStyleEffect_1m2cx_15",b="_advanceStyleClear_1m2cx_22",T="_advanceStyleClearTitle_1m2cx_31",E="_addStyleSettingBtn_1m2cx_36",V="_advanceStyleSettingBtn_1m2cx_54",L="_currentAdvanceStyle_1m2cx_64",B="_advanceStyleTitle_1m2cx_78",$="_fontFamily_1m2cx_100",r={advanceStyleEffect:N,advanceStyleClear:b,advanceStyleClearTitle:T,addStyleSettingBtn:E,advanceStyleSettingBtn:V,currentAdvanceStyle:L,advanceStyleTitle:B,fontFamily:$},w=m(s=>{const n=y(()=>({inputValue:"",inputOnchange:!1,isChange:!1}));x.useEffect(()=>{n.inputValue=s.value},[s.value]);function i(l){const{onChange:a}=s;n.isChange&&a&&(a(l),n.isChange=!1)}return e.jsx(_,{...s,value:n.inputValue,onCompositionStart:()=>{n.inputOnchange=!0},onChange:l=>{n.isChange=!0,n.inputValue=l.target.value,n.inputOnchange||i(l)},onCompositionEnd:l=>{n.inputOnchange=!1,i(l)}})}),{Option:h,OptGroup:u}=f,A=m(({color:s,textShadow:n,textStroke:i,textGlow:l,isClear:a})=>a?e.jsxs("div",{className:r.advanceStyleClear,children:[e.jsx(d,{name:"slashCircle",className:r.advanceStyleClearSvg,fontSize:30}),e.jsx("div",{className:r.advanceStyleClearTitle,children:"清除样式"})]}):e.jsxs("div",{children:[e.jsx("div",{className:r.advanceStyleEffect,style:{fontSize:"20px",lineHeight:1,...j(l.map(o=>({...o,hidden:!1})),n.map(o=>({...o,hidden:!1})),i.map(o=>({...o,hidden:!1})),!1)},children:"A"}),e.jsx("div",{className:r.advanceStyleEffect,style:{color:`${s}`,fontSize:"20px",lineHeight:1},children:"A"})]})),p=null,G=m(({fontGroupList:s,currentFontList:n,fontFamily:i,onChange:l})=>{const a=y(()=>({fontFamily:"",searchFontValue:"",searchFontGroupList:[],fontVipTipVisible:!1,get fontGroupList(){return a.searchFontValue?a.searchFontGroupList:s}}));x.useEffect(()=>{a.fontFamily=i},[i]);async function o(t,c){const v=a.fontFamily;try{a.fontFamily=t,await l(t)}catch(S){throw a.fontFamily=v,C.error(`${c}加载失败`),S}}return e.jsxs(f,{className:r.fontFamily,value:a.fontFamily,optionLabelProp:"label",dropdownClassName:"new-select-v2",dropdownMatchSelectWidth:228,dropdownRender:t=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"searchInputBox",children:[e.jsx(d,{name:"search",fontSize:24}),e.jsx(w,{value:a.searchFontValue,placeholder:"搜索字体",onChange:()=>{},onBlur:()=>{}})]}),a.fontGroupList.length?t:e.jsxs("div",{className:"notFond",children:[e.jsx(d,{name:"search",fontSize:64}),e.jsx("div",{children:"很抱歉，没找到您要的搜索结果"})]})]}),onChange:(t,c)=>{o(t,`${c.label||t}`)},children:[e.jsx(u,{label:"当前模板使用的字体",children:n.map(t=>e.jsx(h,{onMouseEnter:()=>{},onMouseLeave:()=>{},value:t.fontName,label:t.displayName,children:e.jsxs("div",{style:{padding:"9px 8px",display:"flex"},children:[e.jsx("img",{style:{height:"15px",marginRight:"auto"},src:t.thumbnailTextWhite,alt:""}),t.isVip==="1"?p:null]})},`${t.fontName}current`))}),a.fontGroupList.map(t=>e.jsx(u,{label:t.name,children:t.fontList.map(c=>e.jsx(h,{onMouseEnter:()=>{},onMouseLeave:()=>{},value:c.fontName,label:c.displayName,children:e.jsxs("div",{style:{padding:"9px 8px",display:"flex"},children:[e.jsx("img",{style:{height:"15px",marginRight:"auto"},src:c.thumbnailTextWhite,alt:""}),c.isVip==="1"?p:null]})},c.fontName))},t.id))]})});m(({textShadow:s,textStroke:n,textGlow:i,color:l,advanceStyleList:a,onChange:o,visibleChangeHandler:t})=>e.jsx(F,{placement:"bottom",title:"文字特效",overlayClassName:"componentsTextSettingsEffectPopover",onVisibleChange:c=>{t(c)},content:()=>null,children:e.jsxs("div",{children:[e.jsxs("div",{style:{display:s.length||n.length?"none":"flex"},className:r.addStyleSettingBtn,children:[e.jsx(d,{name:"plus",fontSize:20}),e.jsx("span",{children:"添加文字样式"})]}),e.jsxs("div",{style:{display:s.length||n.length?"flex":"none"},className:r.advanceStyleSettingBtn,children:[e.jsx("div",{className:r.currentAdvanceStyle,children:e.jsx(A,{textShadow:s||[],textStroke:n||[],textGlow:i||[],color:l||"",isClear:!1})}),e.jsx("span",{className:r.advanceStyleTitle,children:"文字特效"}),e.jsx(d,{name:"chevronDownBold",fontSize:16})]})]})}));const R=m(({localStore:s,stepStore:n,selectedLayer:i,collageInfo:l})=>null);export{G as F,R as T};
