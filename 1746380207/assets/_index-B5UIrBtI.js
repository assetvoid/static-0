const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-4GaxoQ8r.js","assets/index-BpkY95s5.js"])))=>i.map(i=>d[i]);
import{r as s,R as $,j as a,b as Oo}from"./index-BpkY95s5.js";import{d as M,O as an,c as Po,m as Io,o as be,a as rn}from"./index-CsSXPTiX.js";import{j as No,k as Ro,u as Mo,P as ln,l as zo,n as sn,o as We,p as $e,q as Pt,t as wt,v as It,w as Lo,x as Do,C as cn,y as Ho,z as Bo,A as Ao,B as _o,E as Fo,D as Wo,T as Vo}from"./CommonWrapper-DZbbLtna.js";import{E as Go,F as rt,G as dn,H as P,I as lt,J as j,K as Ne,M as Ke,N as Uo,R as un,O as fn,Q as gn,T as mn,U as Je,V as qo,W as Nt,X as Xo,Y as Ko,Z as Zo,$ as Jo,a0 as je,a1 as Et,a2 as Yo,a3 as hn,a4 as z,a5 as Rt,a6 as R,a7 as Ve,a8 as Mt,a9 as Xe,aa as Qo,ab as $t,ac as ye,ad as ei,ae as pn,af as ti,ag as vn,ah as xn,ai as bn,aj as yn,ak as ni,al as oi,am as Cn,an as ii,ao as ai,ap as ri,aq as li,ar as si,as as ce,at as ci,au as di,av as zt,aw as Lt,ax as ui,v as Z,ay as H,j as Me,az as nt,aA as fi,p as Dt,x as wn,aB as Ye,aC as gi,aD as Qe,aE as mi,aF as jn,h as Sn,l as ze,aG as hi,aH as pi,w as st,aI as vi,B as xi,b as bi,L as yi,aJ as Se,aK as ve,aL as pe,aM as ke,aN as Ze,aO as Ci,aP as wi,aQ as En,aR as ji,aS as Ht,aT as Bt,aU as Si}from"./index-D_Xm5PPB.js";import{w as Ei,C as Te,a as Y,I as $i,S as Ti}from"./common-DhVIxOjg.js";import{g as ki,C as Pe,a as ae,b as $n,A as Oi,c as Pi,d as Ii,e as xe,R as Ni,f as Ri,h as Mi,F as Tn,S as zi,E as Li,i as Di,j as Hi,k as Bi,l as Ai,m as kn,M as gt,n as _i,o as Fi,p as Wi,q as Vi,r as Gi,s as re,t as Ui,u as qi,v as Xi}from"./CommonMenu-RvaSveNv.js";import{P as Re}from"./index-Bmfn-BM4.js";import{B as te,c as On,o as Tt,u as kt}from"./index-B5AmhyiW.js";import{s as ne}from"./style-t4wHHbRu.js";import{d as Ki,c as Zi}from"./uploadUtil-C0L6u1P7.js";import{s as Ji}from"./methods-BkHYA0OL.js";import{D as Yi,b as Qi,a as Pn}from"./indexedDB-C8W6zHmG.js";import{R as ea}from"./index-CROT7Jlo.js";import{l as ta}from"./index-BUMNKR8Y.js";const{round:mt}=Math;function K(e,t,n){const o=e/360,i=t/100,r=n/100;let l,d,c;if(i===0)l=r,d=r,c=r;else{const f=r<.5?r*(1+i):r+i-r*i,u=2*r-f;l=ht(u,f,o+1/3),d=ht(u,f,o),c=ht(u,f,o-1/3)}return Go({r:mt(l*255),g:mt(d*255),b:mt(c*255)})}function ht(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function na(e){return e==="Mask"?{type:"Mask",url:""}:{type:e}}const ot=(e,t,n,o,i)=>({background:e,border:`${P(o.lineWidth)} ${o.lineType} ${t}`,[`${i}-icon`]:{color:n}}),oa=e=>{const{componentCls:t,motionDurationSlow:n,marginXS:o,marginSM:i,fontSize:r,fontSizeLG:l,lineHeight:d,borderRadiusLG:c,motionEaseInOutCirc:f,withDescriptionIconSize:u,colorText:g,colorTextHeading:m,withDescriptionPadding:h,defaultPadding:v}=e;return{[t]:Object.assign(Object.assign({},dn(e)),{position:"relative",display:"flex",alignItems:"center",padding:v,wordWrap:"break-word",borderRadius:c,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:o,lineHeight:0},"&-description":{display:"none",fontSize:r,lineHeight:d},"&-message":{color:m},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${n} ${f}, opacity ${n} ${f},
        padding-top ${n} ${f}, padding-bottom ${n} ${f},
        margin-bottom ${n} ${f}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:h,[`${t}-icon`]:{marginInlineEnd:i,fontSize:u,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:o,color:m,fontSize:l},[`${t}-description`]:{display:"block",color:g}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},ia=e=>{const{componentCls:t,colorSuccess:n,colorSuccessBorder:o,colorSuccessBg:i,colorWarning:r,colorWarningBorder:l,colorWarningBg:d,colorError:c,colorErrorBorder:f,colorErrorBg:u,colorInfo:g,colorInfoBorder:m,colorInfoBg:h}=e;return{[t]:{"&-success":ot(i,o,n,e,t),"&-info":ot(h,m,g,e,t),"&-warning":ot(d,l,r,e,t),"&-error":Object.assign(Object.assign({},ot(u,f,c,e,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}}},aa=e=>{const{componentCls:t,iconCls:n,motionDurationMid:o,marginXS:i,fontSizeIcon:r,colorIcon:l,colorIconHover:d}=e;return{[t]:{"&-action":{marginInlineStart:i},[`${t}-close-icon`]:{marginInlineStart:i,padding:0,overflow:"hidden",fontSize:r,lineHeight:P(r),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${n}-close`]:{color:l,transition:`color ${o}`,"&:hover":{color:d}}},"&-close-text":{color:l,transition:`color ${o}`,"&:hover":{color:d}}}}},ra=e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}),la=rt("Alert",e=>[oa(e),ia(e),aa(e)],ra);var At=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const sa={success:mn,info:gn,error:fn,warning:un},ca=e=>{const{icon:t,prefixCls:n,type:o}=e,i=sa[o]||null;return t?No(t,s.createElement("span",{className:`${n}-icon`},t),()=>({className:j(`${n}-icon`,t.props.className)})):s.createElement(i,{className:`${n}-icon`})},da=e=>{const{isClosable:t,prefixCls:n,closeIcon:o,handleClose:i,ariaProps:r}=e,l=o===!0||o===void 0?s.createElement(Je,null):o;return t?s.createElement("button",Object.assign({type:"button",onClick:i,className:`${n}-close-icon`,tabIndex:0},r),l):null},In=s.forwardRef((e,t)=>{const{description:n,prefixCls:o,message:i,banner:r,className:l,rootClassName:d,style:c,onMouseEnter:f,onMouseLeave:u,onClick:g,afterClose:m,showIcon:h,closable:v,closeText:x,closeIcon:p,action:y,id:b}=e,C=At(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[S,E]=s.useState(!1),w=s.useRef(null);s.useImperativeHandle(t,()=>({nativeElement:w.current}));const{getPrefixCls:T,direction:D,closable:k,closeIcon:I,className:L,style:q}=lt("alert"),O=T("alert",o),[_,X,oe]=la(O),ie=B=>{var A;E(!0),(A=e.onClose)===null||A===void 0||A.call(e,B)},Q=s.useMemo(()=>e.type!==void 0?e.type:r?"warning":"info",[e.type,r]),ue=s.useMemo(()=>typeof v=="object"&&v.closeIcon||x?!0:typeof v=="boolean"?v:p!==!1&&p!==null&&p!==void 0?!0:!!k,[x,p,v,k]),le=r&&h===void 0?!0:h,N=j(O,`${O}-${Q}`,{[`${O}-with-description`]:!!n,[`${O}-no-icon`]:!le,[`${O}-banner`]:!!r,[`${O}-rtl`]:D==="rtl"},L,l,d,oe,X),F=Ne(C,{aria:!0,data:!0}),ee=s.useMemo(()=>typeof v=="object"&&v.closeIcon?v.closeIcon:x||(p!==void 0?p:typeof k=="object"&&k.closeIcon?k.closeIcon:I),[p,v,x,I]),W=s.useMemo(()=>{const B=v??k;if(typeof B=="object"){const{closeIcon:A}=B;return At(B,["closeIcon"])}return{}},[v,k]);return _(s.createElement(Ke,{visible:!S,motionName:`${O}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:B=>({maxHeight:B.offsetHeight}),onLeaveEnd:m},(B,A)=>{let{className:V,style:se}=B;return s.createElement("div",Object.assign({id:b,ref:Uo(w,A),"data-show":!S,className:j(N,V),style:Object.assign(Object.assign(Object.assign({},q),c),se),onMouseEnter:f,onMouseLeave:u,onClick:g,role:"alert"},F),le?s.createElement(ca,{description:n,icon:e.icon,prefixCls:O,type:Q}):null,s.createElement("div",{className:`${O}-content`},i?s.createElement("div",{className:`${O}-message`},i):null,n?s.createElement("div",{className:`${O}-description`},n):null),y?s.createElement("div",{className:`${O}-action`},y):null,s.createElement(da,{isClosable:ue,prefixCls:O,closeIcon:ee,handleClose:ie,ariaProps:W}))}))});function ua(e,t,n){return t=Nt(t),qo(e,Xo()?Reflect.construct(t,n||[],Nt(e).constructor):t.apply(e,n))}let fa=function(e){function t(){var n;return Jo(this,t),n=ua(this,t,arguments),n.state={error:void 0,info:{componentStack:""}},n}return Ko(t,e),Zo(t,[{key:"componentDidCatch",value:function(o,i){this.setState({error:o,info:i})}},{key:"render",value:function(){const{message:o,description:i,id:r,children:l}=this.props,{error:d,info:c}=this.state,f=(c==null?void 0:c.componentStack)||null,u=typeof o>"u"?(d||"").toString():o,g=typeof i>"u"?f:i;return d?s.createElement(In,{id:r,type:"error",message:u,description:s.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},g)}):l}}])}(s.Component);const Nn=In;Nn.ErrorBoundary=fa;function ga(){const[e,t]=s.useState([]),n=s.useCallback(o=>(t(i=>[].concat(je(i),[o])),()=>{t(i=>i.filter(r=>r!==o))}),[]);return[e,n]}const ma=new Et("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),ha=new Et("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),pa=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:n}=e,o=`${n}-fade`,i=t?"&":"";return[Ro(o,ma,ha,e.motionDurationMid,t),{[`
        ${i}${o}-enter,
        ${i}${o}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${i}${o}-leave`]:{animationTimingFunction:"linear"}}]};function pt(e){return!!(e!=null&&e.then)}const Rn=e=>{const{type:t,children:n,prefixCls:o,buttonProps:i,close:r,autoFocus:l,emitEvent:d,isSilent:c,quitOnNullishReturnValue:f,actionFn:u}=e,g=s.useRef(!1),m=s.useRef(null),[h,v]=Yo(!1),x=function(){r==null||r.apply(void 0,arguments)};s.useEffect(()=>{let b=null;return l&&(b=setTimeout(()=>{var C;(C=m.current)===null||C===void 0||C.focus({preventScroll:!0})})),()=>{b&&clearTimeout(b)}},[]);const p=b=>{pt(b)&&(v(!0),b.then(function(){v(!1,!0),x.apply(void 0,arguments),g.current=!1},C=>{if(v(!1,!0),g.current=!1,!(c!=null&&c()))return Promise.reject(C)}))},y=b=>{if(g.current)return;if(g.current=!0,!u){x();return}let C;if(d){if(C=u(b),f&&!pt(C)){g.current=!1,x(b);return}}else if(u.length)C=u(r),g.current=!1;else if(C=u(),!pt(C)){x();return}p(C)};return s.createElement(te,Object.assign({},On(t),{onClick:y,loading:h,prefixCls:o},i,{ref:m}),n)},et=$.createContext({}),{Provider:Mn}=et,_t=()=>{const{autoFocusButton:e,cancelButtonProps:t,cancelTextLocale:n,isSilent:o,mergedOkCancel:i,rootPrefixCls:r,close:l,onCancel:d,onConfirm:c}=s.useContext(et);return i?$.createElement(Rn,{isSilent:o,actionFn:d,close:function(){l==null||l.apply(void 0,arguments),c==null||c(!1)},autoFocus:e==="cancel",buttonProps:t,prefixCls:`${r}-btn`},n):null},Ft=()=>{const{autoFocusButton:e,close:t,isSilent:n,okButtonProps:o,rootPrefixCls:i,okTextLocale:r,okType:l,onConfirm:d,onOk:c}=s.useContext(et);return $.createElement(Rn,{isSilent:n,type:l||"primary",actionFn:c,close:function(){t==null||t.apply(void 0,arguments),d==null||d(!0)},autoFocus:e==="ok",buttonProps:o,prefixCls:`${i}-btn`},r)};var zn=s.createContext({});function Wt(e,t,n){var o=t;return!o&&n&&(o="".concat(e,"-").concat(n)),o}function Vt(e,t){var n=e["page".concat(t?"Y":"X","Offset")],o="scroll".concat(t?"Top":"Left");if(typeof n!="number"){var i=e.document;n=i.documentElement[o],typeof n!="number"&&(n=i.body[o])}return n}function va(e){var t=e.getBoundingClientRect(),n={left:t.left,top:t.top},o=e.ownerDocument,i=o.defaultView||o.parentWindow;return n.left+=Vt(i),n.top+=Vt(i,!0),n}const xa=s.memo(function(e){var t=e.children;return t},function(e,t){var n=t.shouldUpdate;return!n});var ba={width:0,height:0,overflow:"hidden",outline:"none"},ya={outline:"none"},Ln=$.forwardRef(function(e,t){var n=e.prefixCls,o=e.className,i=e.style,r=e.title,l=e.ariaId,d=e.footer,c=e.closable,f=e.closeIcon,u=e.onClose,g=e.children,m=e.bodyStyle,h=e.bodyProps,v=e.modalRender,x=e.onMouseDown,p=e.onMouseUp,y=e.holderRef,b=e.visible,C=e.forceRender,S=e.width,E=e.height,w=e.classNames,T=e.styles,D=$.useContext(zn),k=D.panel,I=hn(y,k),L=s.useRef(),q=s.useRef();$.useImperativeHandle(t,function(){return{focus:function(){var F;(F=L.current)===null||F===void 0||F.focus({preventScroll:!0})},changeActive:function(F){var ee=document,W=ee.activeElement;F&&W===q.current?L.current.focus({preventScroll:!0}):!F&&W===L.current&&q.current.focus({preventScroll:!0})}}});var O={};S!==void 0&&(O.width=S),E!==void 0&&(O.height=E);var _=d?$.createElement("div",{className:j("".concat(n,"-footer"),w==null?void 0:w.footer),style:z({},T==null?void 0:T.footer)},d):null,X=r?$.createElement("div",{className:j("".concat(n,"-header"),w==null?void 0:w.header),style:z({},T==null?void 0:T.header)},$.createElement("div",{className:"".concat(n,"-title"),id:l},r)):null,oe=s.useMemo(function(){return Rt(c)==="object"&&c!==null?c:c?{closeIcon:f??$.createElement("span",{className:"".concat(n,"-close-x")})}:{}},[c,f,n]),ie=Ne(oe,!0),Q=Rt(c)==="object"&&c.disabled,ue=c?$.createElement("button",R({type:"button",onClick:u,"aria-label":"Close"},ie,{className:"".concat(n,"-close"),disabled:Q}),oe.closeIcon):null,le=$.createElement("div",{className:j("".concat(n,"-content"),w==null?void 0:w.content),style:T==null?void 0:T.content},ue,X,$.createElement("div",R({className:j("".concat(n,"-body"),w==null?void 0:w.body),style:z(z({},m),T==null?void 0:T.body)},h),g),_);return $.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":r?l:null,"aria-modal":"true",ref:I,style:z(z({},i),O),className:j(n,o),onMouseDown:x,onMouseUp:p},$.createElement("div",{ref:L,tabIndex:0,style:ya},$.createElement(xa,{shouldUpdate:b||C},v?v(le):le)),$.createElement("div",{tabIndex:0,ref:q,style:ba}))}),Dn=s.forwardRef(function(e,t){var n=e.prefixCls,o=e.title,i=e.style,r=e.className,l=e.visible,d=e.forceRender,c=e.destroyOnClose,f=e.motionName,u=e.ariaId,g=e.onVisibleChanged,m=e.mousePosition,h=s.useRef(),v=s.useState(),x=Ve(v,2),p=x[0],y=x[1],b={};p&&(b.transformOrigin=p);function C(){var S=va(h.current);y(m&&(m.x||m.y)?"".concat(m.x-S.left,"px ").concat(m.y-S.top,"px"):"")}return s.createElement(Ke,{visible:l,onVisibleChanged:g,onAppearPrepare:C,onEnterPrepare:C,forceRender:d,motionName:f,removeOnLeave:c,ref:h},function(S,E){var w=S.className,T=S.style;return s.createElement(Ln,R({},e,{ref:t,title:o,ariaId:u,prefixCls:n,holderRef:E,style:z(z(z({},T),i),b),className:j(r,w)}))})});Dn.displayName="Content";var Ca=function(t){var n=t.prefixCls,o=t.style,i=t.visible,r=t.maskProps,l=t.motionName,d=t.className;return s.createElement(Ke,{key:"mask",visible:i,motionName:l,leavedClassName:"".concat(n,"-mask-hidden")},function(c,f){var u=c.className,g=c.style;return s.createElement("div",R({ref:f,style:z(z({},g),o),className:j("".concat(n,"-mask"),u,d)},r))})},wa=function(t){var n=t.prefixCls,o=n===void 0?"rc-dialog":n,i=t.zIndex,r=t.visible,l=r===void 0?!1:r,d=t.keyboard,c=d===void 0?!0:d,f=t.focusTriggerAfterClose,u=f===void 0?!0:f,g=t.wrapStyle,m=t.wrapClassName,h=t.wrapProps,v=t.onClose,x=t.afterOpenChange,p=t.afterClose,y=t.transitionName,b=t.animation,C=t.closable,S=C===void 0?!0:C,E=t.mask,w=E===void 0?!0:E,T=t.maskTransitionName,D=t.maskAnimation,k=t.maskClosable,I=k===void 0?!0:k,L=t.maskStyle,q=t.maskProps,O=t.rootClassName,_=t.classNames,X=t.styles,oe=s.useRef(),ie=s.useRef(),Q=s.useRef(),ue=s.useState(l),le=Ve(ue,2),N=le[0],F=le[1],ee=Mo();function W(){Mt(ie.current,document.activeElement)||(oe.current=document.activeElement)}function B(){if(!Mt(ie.current,document.activeElement)){var J;(J=Q.current)===null||J===void 0||J.focus()}}function A(J){if(J)B();else{if(F(!1),w&&oe.current&&u){try{oe.current.focus({preventScroll:!0})}catch{}oe.current=null}N&&(p==null||p())}x==null||x(J)}function V(J){v==null||v(J)}var se=s.useRef(!1),Ce=s.useRef(),Ee=function(){clearTimeout(Ce.current),se.current=!0},G=function(){Ce.current=setTimeout(function(){se.current=!1})},He=null;I&&(He=function(qe){se.current?se.current=!1:ie.current===qe.target&&V(qe)});function we(J){if(c&&J.keyCode===Xe.ESC){J.stopPropagation(),V(J);return}l&&J.keyCode===Xe.TAB&&Q.current.changeActive(!J.shiftKey)}s.useEffect(function(){l&&(F(!0),W())},[l]),s.useEffect(function(){return function(){clearTimeout(Ce.current)}},[]);var ut=z(z(z({zIndex:i},g),X==null?void 0:X.wrapper),{},{display:N?null:"none"});return s.createElement("div",R({className:j("".concat(o,"-root"),O)},Ne(t,{data:!0})),s.createElement(Ca,{prefixCls:o,visible:w&&l,motionName:Wt(o,T,D),style:z(z({zIndex:i},L),X==null?void 0:X.mask),maskProps:q,className:_==null?void 0:_.mask}),s.createElement("div",R({tabIndex:-1,onKeyDown:we,className:j("".concat(o,"-wrap"),m,_==null?void 0:_.wrapper),ref:ie,onClick:He,style:ut},h),s.createElement(Dn,R({},t,{onMouseDown:Ee,onMouseUp:G,ref:Q,closable:S,ariaId:ee,prefixCls:o,visible:l&&N,onClose:V,onVisibleChanged:A,motionName:Wt(o,y,b)}))))},Hn=function(t){var n=t.visible,o=t.getContainer,i=t.forceRender,r=t.destroyOnClose,l=r===void 0?!1:r,d=t.afterClose,c=t.panelRef,f=s.useState(n),u=Ve(f,2),g=u[0],m=u[1],h=s.useMemo(function(){return{panel:c}},[c]);return s.useEffect(function(){n&&m(!0)},[n]),!i&&l&&!g?null:s.createElement(zn.Provider,{value:h},s.createElement(ln,{open:n||i||g,autoDestroy:!1,getContainer:o,autoLock:n||g},s.createElement(wa,R({},t,{destroyOnClose:l,afterClose:function(){d==null||d(),m(!1)}}))))};Hn.displayName="Dialog";function at(e){if(e)return{closable:e.closable,closeIcon:e.closeIcon}}function Gt(e){const{closable:t,closeIcon:n}=e||{};return $.useMemo(()=>{if(!t&&(t===!1||n===!1||n===null))return!1;if(t===void 0&&n===void 0)return null;let o={closeIcon:typeof n!="boolean"&&n!==null?n:void 0};return t&&typeof t=="object"&&(o=Object.assign(Object.assign({},o),t)),o},[t,n])}function Ut(){const e={};for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return n.forEach(i=>{i&&Object.keys(i).forEach(r=>{i[r]!==void 0&&(e[r]=i[r])})}),e}const ja={};function Bn(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ja;const o=Gt(e),i=Gt(t),r=typeof o!="boolean"?!!(o!=null&&o.disabled):!1,l=$.useMemo(()=>Object.assign({closeIcon:$.createElement(Je,null)},n),[n]),d=$.useMemo(()=>o===!1?!1:o?Ut(l,i,o):i===!1?!1:i?Ut(l,i):l.closable?l:!1,[o,i,l]);return $.useMemo(()=>{if(d===!1)return[!1,null,r];const{closeIconRender:c}=l,{closeIcon:f}=d;let u=f;if(u!=null){c&&(u=c(f));const g=Ne(d,!0);Object.keys(g).length&&(u=$.isValidElement(u)?$.cloneElement(u,g):$.createElement("span",Object.assign({},g),u))}return[!0,u,r]},[d,l])}const Sa=()=>Qo()&&window.document.documentElement,ct=e=>{const{prefixCls:t,className:n,style:o,size:i,shape:r}=e,l=j({[`${t}-lg`]:i==="large",[`${t}-sm`]:i==="small"}),d=j({[`${t}-circle`]:r==="circle",[`${t}-square`]:r==="square",[`${t}-round`]:r==="round"}),c=s.useMemo(()=>typeof i=="number"?{width:i,height:i,lineHeight:`${i}px`}:{},[i]);return s.createElement("span",{className:j(t,l,d,n),style:Object.assign(Object.assign({},c),o)})},Ea=new Et("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),dt=e=>({height:e,lineHeight:P(e)}),Fe=e=>Object.assign({width:e},dt(e)),$a=e=>({background:e.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:Ea,animationDuration:e.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),vt=(e,t)=>Object.assign({width:t(e).mul(5).equal(),minWidth:t(e).mul(5).equal()},dt(e)),Ta=e=>{const{skeletonAvatarCls:t,gradientFromColor:n,controlHeight:o,controlHeightLG:i,controlHeightSM:r}=e;return{[t]:Object.assign({display:"inline-block",verticalAlign:"top",background:n},Fe(o)),[`${t}${t}-circle`]:{borderRadius:"50%"},[`${t}${t}-lg`]:Object.assign({},Fe(i)),[`${t}${t}-sm`]:Object.assign({},Fe(r))}},ka=e=>{const{controlHeight:t,borderRadiusSM:n,skeletonInputCls:o,controlHeightLG:i,controlHeightSM:r,gradientFromColor:l,calc:d}=e;return{[o]:Object.assign({display:"inline-block",verticalAlign:"top",background:l,borderRadius:n},vt(t,d)),[`${o}-lg`]:Object.assign({},vt(i,d)),[`${o}-sm`]:Object.assign({},vt(r,d))}},qt=e=>Object.assign({width:e},dt(e)),Oa=e=>{const{skeletonImageCls:t,imageSizeBase:n,gradientFromColor:o,borderRadiusSM:i,calc:r}=e;return{[t]:Object.assign(Object.assign({display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:o,borderRadius:i},qt(r(n).mul(2).equal())),{[`${t}-path`]:{fill:"#bfbfbf"},[`${t}-svg`]:Object.assign(Object.assign({},qt(n)),{maxWidth:r(n).mul(4).equal(),maxHeight:r(n).mul(4).equal()}),[`${t}-svg${t}-svg-circle`]:{borderRadius:"50%"}}),[`${t}${t}-circle`]:{borderRadius:"50%"}}},xt=(e,t,n)=>{const{skeletonButtonCls:o}=e;return{[`${n}${o}-circle`]:{width:t,minWidth:t,borderRadius:"50%"},[`${n}${o}-round`]:{borderRadius:t}}},bt=(e,t)=>Object.assign({width:t(e).mul(2).equal(),minWidth:t(e).mul(2).equal()},dt(e)),Pa=e=>{const{borderRadiusSM:t,skeletonButtonCls:n,controlHeight:o,controlHeightLG:i,controlHeightSM:r,gradientFromColor:l,calc:d}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[n]:Object.assign({display:"inline-block",verticalAlign:"top",background:l,borderRadius:t,width:d(o).mul(2).equal(),minWidth:d(o).mul(2).equal()},bt(o,d))},xt(e,o,n)),{[`${n}-lg`]:Object.assign({},bt(i,d))}),xt(e,i,`${n}-lg`)),{[`${n}-sm`]:Object.assign({},bt(r,d))}),xt(e,r,`${n}-sm`))},Ia=e=>{const{componentCls:t,skeletonAvatarCls:n,skeletonTitleCls:o,skeletonParagraphCls:i,skeletonButtonCls:r,skeletonInputCls:l,skeletonImageCls:d,controlHeight:c,controlHeightLG:f,controlHeightSM:u,gradientFromColor:g,padding:m,marginSM:h,borderRadius:v,titleHeight:x,blockRadius:p,paragraphLiHeight:y,controlHeightXS:b,paragraphMarginTop:C}=e;return{[t]:{display:"table",width:"100%",[`${t}-header`]:{display:"table-cell",paddingInlineEnd:m,verticalAlign:"top",[n]:Object.assign({display:"inline-block",verticalAlign:"top",background:g},Fe(c)),[`${n}-circle`]:{borderRadius:"50%"},[`${n}-lg`]:Object.assign({},Fe(f)),[`${n}-sm`]:Object.assign({},Fe(u))},[`${t}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[o]:{width:"100%",height:x,background:g,borderRadius:p,[`+ ${i}`]:{marginBlockStart:u}},[i]:{padding:0,"> li":{width:"100%",height:y,listStyle:"none",background:g,borderRadius:p,"+ li":{marginBlockStart:b}}},[`${i}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${t}-content`]:{[`${o}, ${i} > li`]:{borderRadius:v}}},[`${t}-with-avatar ${t}-content`]:{[o]:{marginBlockStart:h,[`+ ${i}`]:{marginBlockStart:C}}},[`${t}${t}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},Pa(e)),Ta(e)),ka(e)),Oa(e)),[`${t}${t}-block`]:{width:"100%",[r]:{width:"100%"},[l]:{width:"100%"}},[`${t}${t}-active`]:{[`
        ${o},
        ${i} > li,
        ${n},
        ${r},
        ${l},
        ${d}
      `]:Object.assign({},$a(e))}}},Na=e=>{const{colorFillContent:t,colorFill:n}=e,o=t,i=n;return{color:o,colorGradientEnd:i,gradientFromColor:o,gradientToColor:i,titleHeight:e.controlHeight/2,blockRadius:e.borderRadiusSM,paragraphMarginTop:e.marginLG+e.marginXXS,paragraphLiHeight:e.controlHeight/2}},Ge=rt("Skeleton",e=>{const{componentCls:t,calc:n}=e,o=$t(e,{skeletonAvatarCls:`${t}-avatar`,skeletonTitleCls:`${t}-title`,skeletonParagraphCls:`${t}-paragraph`,skeletonButtonCls:`${t}-button`,skeletonInputCls:`${t}-input`,skeletonImageCls:`${t}-image`,imageSizeBase:n(e.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${e.gradientFromColor} 25%, ${e.gradientToColor} 37%, ${e.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[Ia(o)]},Na,{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),Ra=e=>{const{prefixCls:t,className:n,rootClassName:o,active:i,shape:r="circle",size:l="default"}=e,{getPrefixCls:d}=s.useContext(ye),c=d("skeleton",t),[f,u,g]=Ge(c),m=Tt(e,["prefixCls","className"]),h=j(c,`${c}-element`,{[`${c}-active`]:i},n,o,u,g);return f(s.createElement("div",{className:h},s.createElement(ct,Object.assign({prefixCls:`${c}-avatar`,shape:r,size:l},m))))},Ma=e=>{const{prefixCls:t,className:n,rootClassName:o,active:i,block:r=!1,size:l="default"}=e,{getPrefixCls:d}=s.useContext(ye),c=d("skeleton",t),[f,u,g]=Ge(c),m=Tt(e,["prefixCls"]),h=j(c,`${c}-element`,{[`${c}-active`]:i,[`${c}-block`]:r},n,o,u,g);return f(s.createElement("div",{className:h},s.createElement(ct,Object.assign({prefixCls:`${c}-button`,size:l},m))))},za="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",La=e=>{const{prefixCls:t,className:n,rootClassName:o,style:i,active:r}=e,{getPrefixCls:l}=s.useContext(ye),d=l("skeleton",t),[c,f,u]=Ge(d),g=j(d,`${d}-element`,{[`${d}-active`]:r},n,o,f,u);return c(s.createElement("div",{className:g},s.createElement("div",{className:j(`${d}-image`,n),style:i},s.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${d}-image-svg`},s.createElement("title",null,"Image placeholder"),s.createElement("path",{d:za,className:`${d}-image-path`})))))},Da=e=>{const{prefixCls:t,className:n,rootClassName:o,active:i,block:r,size:l="default"}=e,{getPrefixCls:d}=s.useContext(ye),c=d("skeleton",t),[f,u,g]=Ge(c),m=Tt(e,["prefixCls"]),h=j(c,`${c}-element`,{[`${c}-active`]:i,[`${c}-block`]:r},n,o,u,g);return f(s.createElement("div",{className:h},s.createElement(ct,Object.assign({prefixCls:`${c}-input`,size:l},m))))},Ha=e=>{const{prefixCls:t,className:n,rootClassName:o,style:i,active:r,children:l}=e,{getPrefixCls:d}=s.useContext(ye),c=d("skeleton",t),[f,u,g]=Ge(c),m=j(c,`${c}-element`,{[`${c}-active`]:r},u,n,o,g);return f(s.createElement("div",{className:m},s.createElement("div",{className:j(`${c}-image`,n),style:i},l)))},Ba=(e,t)=>{const{width:n,rows:o=2}=t;if(Array.isArray(n))return n[e];if(o-1===e)return n},Aa=e=>{const{prefixCls:t,className:n,style:o,rows:i=0}=e,r=Array.from({length:i}).map((l,d)=>s.createElement("li",{key:d,style:{width:Ba(d,e)}}));return s.createElement("ul",{className:j(t,n),style:o},r)},_a=e=>{let{prefixCls:t,className:n,width:o,style:i}=e;return s.createElement("h3",{className:j(t,n),style:Object.assign({width:o},i)})};function yt(e){return e&&typeof e=="object"?e:{}}function Fa(e,t){return e&&!t?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function Wa(e,t){return!e&&t?{width:"38%"}:e&&t?{width:"50%"}:{}}function Va(e,t){const n={};return(!e||!t)&&(n.width="61%"),!e&&t?n.rows=3:n.rows=2,n}const Le=e=>{const{prefixCls:t,loading:n,className:o,rootClassName:i,style:r,children:l,avatar:d=!1,title:c=!0,paragraph:f=!0,active:u,round:g}=e,{getPrefixCls:m,direction:h,className:v,style:x}=lt("skeleton"),p=m("skeleton",t),[y,b,C]=Ge(p);if(n||!("loading"in e)){const S=!!d,E=!!c,w=!!f;let T;if(S){const I=Object.assign(Object.assign({prefixCls:`${p}-avatar`},Fa(E,w)),yt(d));T=s.createElement("div",{className:`${p}-header`},s.createElement(ct,Object.assign({},I)))}let D;if(E||w){let I;if(E){const q=Object.assign(Object.assign({prefixCls:`${p}-title`},Wa(S,w)),yt(c));I=s.createElement(_a,Object.assign({},q))}let L;if(w){const q=Object.assign(Object.assign({prefixCls:`${p}-paragraph`},Va(S,E)),yt(f));L=s.createElement(Aa,Object.assign({},q))}D=s.createElement("div",{className:`${p}-content`},I,L)}const k=j(p,{[`${p}-with-avatar`]:S,[`${p}-active`]:u,[`${p}-rtl`]:h==="rtl",[`${p}-round`]:g},v,o,i,b,C);return y(s.createElement("div",{className:k,style:Object.assign(Object.assign({},x),r)},T,D))}return l??null};Le.Button=Ma;Le.Avatar=Ra;Le.Input=Da;Le.Image=La;Le.Node=Ha;function Xt(){}const Ga=s.createContext({add:Xt,remove:Xt});function An(e){const t=s.useContext(Ga),n=s.useRef(null);return ei(i=>{if(i){const r=e?i.querySelector(e):i;t.add(r),n.current=r}else t.remove(n.current)})}const Kt=()=>{const{cancelButtonProps:e,cancelTextLocale:t,onCancel:n}=s.useContext(et);return $.createElement(te,Object.assign({onClick:n},e),t)},Zt=()=>{const{confirmLoading:e,okButtonProps:t,okType:n,okTextLocale:o,onOk:i}=s.useContext(et);return $.createElement(te,Object.assign({},On(n),{loading:e,onClick:i},t),o)};function _n(e,t){return $.createElement("span",{className:`${e}-close-x`},t||$.createElement(Je,{className:`${e}-close-icon`}))}const Fn=e=>{const{okText:t,okType:n="primary",cancelText:o,confirmLoading:i,onOk:r,onCancel:l,okButtonProps:d,cancelButtonProps:c,footer:f}=e,[u]=kt("Modal",pn()),g=t||(u==null?void 0:u.okText),m=o||(u==null?void 0:u.cancelText),h={confirmLoading:i,okButtonProps:d,cancelButtonProps:c,okTextLocale:g,cancelTextLocale:m,okType:n,onOk:r,onCancel:l},v=$.useMemo(()=>h,je(Object.values(h)));let x;return typeof f=="function"||typeof f>"u"?(x=$.createElement($.Fragment,null,$.createElement(Kt,null),$.createElement(Zt,null)),typeof f=="function"&&(x=f(x,{OkBtn:Zt,CancelBtn:Kt})),x=$.createElement(Mn,{value:v},x)):x=f,$.createElement(ti,{disabled:!1},x)};function Jt(e){return{position:e,inset:0}}const Ua=e=>{const{componentCls:t,antCls:n}=e;return[{[`${t}-root`]:{[`${t}${n}-zoom-enter, ${t}${n}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"},[`${t}${n}-zoom-leave ${t}-content`]:{pointerEvents:"none"},[`${t}-mask`]:Object.assign(Object.assign({},Jt("fixed")),{zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask,pointerEvents:"none",[`${t}-hidden`]:{display:"none"}}),[`${t}-wrap`]:Object.assign(Object.assign({},Jt("fixed")),{zIndex:e.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${t}-root`]:pa(e)}]},qa=e=>{const{componentCls:t}=e;return[{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl"},[`${t}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[t]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${e.screenSMMax}px)`]:{[t]:{maxWidth:"calc(100vw - 16px)",margin:`${P(e.marginXS)} auto`},[`${t}-centered`]:{[t]:{flex:1}}}}},{[t]:Object.assign(Object.assign({},dn(e)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${P(e.calc(e.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:e.paddingLG,[`${t}-title`]:{margin:0,color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight,wordWrap:"break-word"},[`${t}-content`]:{position:"relative",backgroundColor:e.contentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadow,pointerEvents:"auto",padding:e.contentPadding},[`${t}-close`]:Object.assign({position:"absolute",top:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),insetInlineEnd:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),zIndex:e.calc(e.zIndexPopupBase).add(10).equal(),padding:0,color:e.modalCloseIconColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalCloseBtnSize,height:e.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${e.motionDurationMid}, background-color ${e.motionDurationMid}`,"&-x":{display:"flex",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:P(e.modalCloseBtnSize),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:disabled":{pointerEvents:"none"},"&:hover":{color:e.modalCloseIconHoverColor,backgroundColor:e.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:e.colorBgTextActive}},vn(e)),[`${t}-header`]:{color:e.colorText,background:e.headerBg,borderRadius:`${P(e.borderRadiusLG)} ${P(e.borderRadiusLG)} 0 0`,marginBottom:e.headerMarginBottom,padding:e.headerPadding,borderBottom:e.headerBorderBottom},[`${t}-body`]:{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word",padding:e.bodyPadding,[`${t}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:`${P(e.margin)} auto`}},[`${t}-footer`]:{textAlign:"end",background:e.footerBg,marginTop:e.footerMarginTop,padding:e.footerPadding,borderTop:e.footerBorderTop,borderRadius:e.footerBorderRadius,[`> ${e.antCls}-btn + ${e.antCls}-btn`]:{marginInlineStart:e.marginXS}},[`${t}-open`]:{overflow:"hidden"}})},{[`${t}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${t}-content,
          ${t}-body,
          ${t}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${t}-confirm-body`]:{marginBottom:"auto"}}}]},Xa=e=>{const{componentCls:t}=e;return{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl",[`${t}-confirm-body`]:{direction:"rtl"}}}}},Ka=e=>{const{componentCls:t}=e,n=ki(e);delete n.xs;const o=Object.keys(n).map(i=>({[`@media (min-width: ${P(n[i])})`]:{width:`var(--${t.replace(".","")}-${i}-width)`}}));return{[`${t}-root`]:{[t]:[{width:`var(--${t.replace(".","")}-xs-width)`}].concat(je(o))}}},Wn=e=>{const t=e.padding,n=e.fontSizeHeading5,o=e.lineHeightHeading5;return $t(e,{modalHeaderHeight:e.calc(e.calc(o).mul(n).equal()).add(e.calc(t).mul(2).equal()).equal(),modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterBorderWidth:e.lineWidth,modalCloseIconColor:e.colorIcon,modalCloseIconHoverColor:e.colorIconHover,modalCloseBtnSize:e.controlHeight,modalConfirmIconSize:e.fontHeight,modalTitleHeight:e.calc(e.titleFontSize).mul(e.titleLineHeight).equal()})},Vn=e=>({footerBg:"transparent",headerBg:e.colorBgElevated,titleLineHeight:e.lineHeightHeading5,titleFontSize:e.fontSizeHeading5,contentBg:e.colorBgElevated,titleColor:e.colorTextHeading,contentPadding:e.wireframe?0:`${P(e.paddingMD)} ${P(e.paddingContentHorizontalLG)}`,headerPadding:e.wireframe?`${P(e.padding)} ${P(e.paddingLG)}`:0,headerBorderBottom:e.wireframe?`${P(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",headerMarginBottom:e.wireframe?0:e.marginXS,bodyPadding:e.wireframe?e.paddingLG:0,footerPadding:e.wireframe?`${P(e.paddingXS)} ${P(e.padding)}`:0,footerBorderTop:e.wireframe?`${P(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",footerBorderRadius:e.wireframe?`0 0 ${P(e.borderRadiusLG)} ${P(e.borderRadiusLG)}`:0,footerMarginTop:e.wireframe?0:e.marginSM,confirmBodyPadding:e.wireframe?`${P(e.padding*2)} ${P(e.padding*2)} ${P(e.paddingLG)}`:0,confirmIconMarginInlineEnd:e.wireframe?e.margin:e.marginSM,confirmBtnsMarginTop:e.wireframe?e.marginLG:e.marginSM}),Gn=rt("Modal",e=>{const t=Wn(e);return[qa(t),Xa(t),Ua(t),zo(t,"zoom"),Ka(t)]},Vn,{unitless:{titleLineHeight:!0}});var Za=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};let jt;const Ja=e=>{jt={x:e.pageX,y:e.pageY},setTimeout(()=>{jt=null},100)};Sa()&&document.documentElement.addEventListener("click",Ja,!0);const Un=e=>{var t;const{getPopupContainer:n,getPrefixCls:o,direction:i,modal:r}=s.useContext(ye),l=A=>{const{onCancel:V}=e;V==null||V(A)},d=A=>{const{onOk:V}=e;V==null||V(A)},{prefixCls:c,className:f,rootClassName:u,open:g,wrapClassName:m,centered:h,getContainer:v,focusTriggerAfterClose:x=!0,style:p,visible:y,width:b=520,footer:C,classNames:S,styles:E,children:w,loading:T}=e,D=Za(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading"]),k=o("modal",c),I=o(),L=xn(k),[q,O,_]=Gn(k,L),X=j(m,{[`${k}-centered`]:h??(r==null?void 0:r.centered),[`${k}-wrap-rtl`]:i==="rtl"}),oe=C!==null&&!T?s.createElement(Fn,Object.assign({},e,{onOk:d,onCancel:l})):null,[ie,Q,ue]=Bn(at(e),at(r),{closable:!0,closeIcon:s.createElement(Je,{className:`${k}-close-icon`}),closeIconRender:A=>_n(k,A)}),le=An(`.${k}-content`),[N,F]=bn("Modal",D.zIndex),[ee,W]=s.useMemo(()=>b&&typeof b=="object"?[void 0,b]:[b,void 0],[b]),B=s.useMemo(()=>{const A={};return W&&Object.keys(W).forEach(V=>{const se=W[V];se!==void 0&&(A[`--${k}-${V}-width`]=typeof se=="number"?`${se}px`:se)}),A},[W]);return q(s.createElement(sn,{form:!0,space:!0},s.createElement(yn.Provider,{value:F},s.createElement(Hn,Object.assign({width:ee},D,{zIndex:N,getContainer:v===void 0?n:v,prefixCls:k,rootClassName:j(O,u,_,L),footer:oe,visible:g??y,mousePosition:(t=D.mousePosition)!==null&&t!==void 0?t:jt,onClose:l,closable:ie&&{disabled:ue,closeIcon:Q},closeIcon:Q,focusTriggerAfterClose:x,transitionName:We(I,"zoom",e.transitionName),maskTransitionName:We(I,"fade",e.maskTransitionName),className:j(O,f,r==null?void 0:r.className),style:Object.assign(Object.assign(Object.assign({},r==null?void 0:r.style),p),B),classNames:Object.assign(Object.assign(Object.assign({},r==null?void 0:r.classNames),S),{wrapper:j(X,S==null?void 0:S.wrapper)}),styles:Object.assign(Object.assign({},r==null?void 0:r.styles),E),panelRef:le}),T?s.createElement(Le,{active:!0,title:!1,paragraph:{rows:4},className:`${k}-body-skeleton`}):w))))},Ya=e=>{const{componentCls:t,titleFontSize:n,titleLineHeight:o,modalConfirmIconSize:i,fontSize:r,lineHeight:l,modalTitleHeight:d,fontHeight:c,confirmBodyPadding:f}=e,u=`${t}-confirm`;return{[u]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${u}-body-wrapper`]:Object.assign({},oi()),[`&${t} ${t}-body`]:{padding:f},[`${u}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:i,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(c).sub(i).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(d).sub(i).equal()).div(2).equal()}},[`${u}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS,maxWidth:`calc(100% - ${P(e.marginSM)})`},[`${e.iconCls} + ${u}-paragraph`]:{maxWidth:`calc(100% - ${P(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${u}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:n,lineHeight:o},[`${u}-content`]:{color:e.colorText,fontSize:r,lineHeight:l},[`${u}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${u}-error ${u}-body > ${e.iconCls}`]:{color:e.colorError},[`${u}-warning ${u}-body > ${e.iconCls},
        ${u}-confirm ${u}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${u}-info ${u}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${u}-success ${u}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},Qa=ni(["Modal","confirm"],e=>{const t=Wn(e);return[Ya(t)]},Vn,{order:-1e3});var er=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};function qn(e){const{prefixCls:t,icon:n,okText:o,cancelText:i,confirmPrefixCls:r,type:l,okCancel:d,footer:c,locale:f}=e,u=er(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let g=n;if(!n&&n!==null)switch(l){case"info":g=s.createElement(gn,null);break;case"success":g=s.createElement(mn,null);break;case"error":g=s.createElement(fn,null);break;default:g=s.createElement(un,null)}const m=d??l==="confirm",h=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[v]=kt("Modal"),x=f||v,p=o||(m?x==null?void 0:x.okText:x==null?void 0:x.justOkText),y=i||(x==null?void 0:x.cancelText),b=Object.assign({autoFocusButton:h,cancelTextLocale:y,okTextLocale:p,mergedOkCancel:m},u),C=s.useMemo(()=>b,je(Object.values(b))),S=s.createElement(s.Fragment,null,s.createElement(_t,null),s.createElement(Ft,null)),E=e.title!==void 0&&e.title!==null,w=`${r}-body`;return s.createElement("div",{className:`${r}-body-wrapper`},s.createElement("div",{className:j(w,{[`${w}-has-title`]:E})},g,s.createElement("div",{className:`${r}-paragraph`},E&&s.createElement("span",{className:`${r}-title`},e.title),s.createElement("div",{className:`${r}-content`},e.content))),c===void 0||typeof c=="function"?s.createElement(Mn,{value:C},s.createElement("div",{className:`${r}-btns`},typeof c=="function"?c(S,{OkBtn:Ft,CancelBtn:_t}):S)):c,s.createElement(Qa,{prefixCls:t}))}const tr=e=>{const{close:t,zIndex:n,maskStyle:o,direction:i,prefixCls:r,wrapClassName:l,rootPrefixCls:d,bodyStyle:c,closable:f=!1,onConfirm:u,styles:g}=e,m=`${r}-confirm`,h=e.width||416,v=e.style||{},x=e.mask===void 0?!0:e.mask,p=e.maskClosable===void 0?!1:e.maskClosable,y=j(m,`${m}-${e.type}`,{[`${m}-rtl`]:i==="rtl"},e.className),[,b]=ii(),C=s.useMemo(()=>n!==void 0?n:b.zIndexPopupBase+ai,[n,b]);return s.createElement(Un,Object.assign({},e,{className:y,wrapClassName:j({[`${m}-centered`]:!!e.centered},l),onCancel:()=>{t==null||t({triggerCancel:!0}),u==null||u(!1)},title:"",footer:null,transitionName:We(d||"","zoom",e.transitionName),maskTransitionName:We(d||"","fade",e.maskTransitionName),mask:x,maskClosable:p,style:v,styles:Object.assign({body:c,mask:o},g),width:h,zIndex:C,closable:f}),s.createElement(qn,Object.assign({},e,{confirmPrefixCls:m})))},Xn=e=>{const{rootPrefixCls:t,iconPrefixCls:n,direction:o,theme:i}=e;return s.createElement(Cn,{prefixCls:t,iconPrefixCls:n,direction:o,theme:i},s.createElement(tr,Object.assign({},e)))},Ie=[];let Kn="";function Zn(){return Kn}const nr=e=>{var t,n;const{prefixCls:o,getContainer:i,direction:r}=e,l=pn(),d=s.useContext(ye),c=Zn()||d.getPrefixCls(),f=o||`${c}-modal`;let u=i;return u===!1&&(u=void 0),$.createElement(Xn,Object.assign({},e,{rootPrefixCls:c,prefixCls:f,iconPrefixCls:d.iconPrefixCls,theme:d.theme,direction:r??d.direction,locale:(n=(t=d.locale)===null||t===void 0?void 0:t.Modal)!==null&&n!==void 0?n:l,getContainer:u}))};function tt(e){const t=ri(),n=document.createDocumentFragment();let o=Object.assign(Object.assign({},e),{close:c,open:!0}),i,r;function l(){for(var u,g=arguments.length,m=new Array(g),h=0;h<g;h++)m[h]=arguments[h];if(m.some(p=>p==null?void 0:p.triggerCancel)){var x;(u=e.onCancel)===null||u===void 0||(x=u).call.apply(x,[e,()=>{}].concat(je(m.slice(1))))}for(let p=0;p<Ie.length;p++)if(Ie[p]===c){Ie.splice(p,1);break}r()}function d(u){clearTimeout(i),i=setTimeout(()=>{const g=t.getPrefixCls(void 0,Zn()),m=t.getIconPrefixCls(),h=t.getTheme(),v=$.createElement(nr,Object.assign({},u));r=li()($.createElement(Cn,{prefixCls:g,iconPrefixCls:m,theme:h},t.holderRender?t.holderRender(v):v),n)})}function c(){for(var u=arguments.length,g=new Array(u),m=0;m<u;m++)g[m]=arguments[m];o=Object.assign(Object.assign({},o),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),l.apply(this,g)}}),o.visible&&delete o.visible,d(o)}function f(u){typeof u=="function"?o=u(o):o=Object.assign(Object.assign({},o),u),d(o)}return d(o),Ie.push(c),{destroy:c,update:f}}function Jn(e){return Object.assign(Object.assign({},e),{type:"warning"})}function Yn(e){return Object.assign(Object.assign({},e),{type:"info"})}function Qn(e){return Object.assign(Object.assign({},e),{type:"success"})}function eo(e){return Object.assign(Object.assign({},e),{type:"error"})}function to(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function or(e){let{rootPrefixCls:t}=e;Kn=t}var ir=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const ar=(e,t)=>{var n,{afterClose:o,config:i}=e,r=ir(e,["afterClose","config"]);const[l,d]=s.useState(!0),[c,f]=s.useState(i),{direction:u,getPrefixCls:g}=s.useContext(ye),m=g("modal"),h=g(),v=()=>{var b;o(),(b=c.afterClose)===null||b===void 0||b.call(c)},x=function(){var b;d(!1);for(var C=arguments.length,S=new Array(C),E=0;E<C;E++)S[E]=arguments[E];if(S.some(D=>D==null?void 0:D.triggerCancel)){var T;(b=c.onCancel)===null||b===void 0||(T=b).call.apply(T,[c,()=>{}].concat(je(S.slice(1))))}};s.useImperativeHandle(t,()=>({destroy:x,update:b=>{f(C=>Object.assign(Object.assign({},C),b))}}));const p=(n=c.okCancel)!==null&&n!==void 0?n:c.type==="confirm",[y]=kt("Modal",si.Modal);return s.createElement(Xn,Object.assign({prefixCls:m,rootPrefixCls:h},c,{close:x,open:l,afterClose:v,okText:c.okText||(p?y==null?void 0:y.okText:y==null?void 0:y.justOkText),direction:c.direction||u,cancelText:c.cancelText||(y==null?void 0:y.cancelText)},r))},rr=s.forwardRef(ar);let Yt=0;const lr=s.memo(s.forwardRef((e,t)=>{const[n,o]=ga();return s.useImperativeHandle(t,()=>({patchElement:o}),[]),s.createElement(s.Fragment,null,n)}));function sr(){const e=s.useRef(null),[t,n]=s.useState([]);s.useEffect(()=>{t.length&&(je(t).forEach(l=>{l()}),n([]))},[t]);const o=s.useCallback(r=>function(d){var c;Yt+=1;const f=s.createRef();let u;const g=new Promise(p=>{u=p});let m=!1,h;const v=s.createElement(rr,{key:`modal-${Yt}`,config:r(d),ref:f,afterClose:()=>{h==null||h()},isSilent:()=>m,onConfirm:p=>{u(p)}});return h=(c=e.current)===null||c===void 0?void 0:c.patchElement(v),h&&Ie.push(h),{destroy:()=>{function p(){var y;(y=f.current)===null||y===void 0||y.destroy()}f.current?p():n(y=>[].concat(je(y),[p]))},update:p=>{function y(){var b;(b=f.current)===null||b===void 0||b.update(p)}f.current?y():n(b=>[].concat(je(b),[y]))},then:p=>(m=!0,g.then(p))}},[]);return[s.useMemo(()=>({info:o(Yn),success:o(Qn),error:o(eo),warning:o(Jn),confirm:o(to)}),[]),s.createElement(lr,{key:"modal-holder",ref:e})]}var cr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},dr=function(t,n){return s.createElement(ce,R({},t,{ref:n,icon:cr}))},ur=s.forwardRef(dr),Qt=s.createContext(null),no=s.createContext({}),fr=["prefixCls","className","containerRef"],gr=function(t){var n=t.prefixCls,o=t.className,i=t.containerRef,r=ci(t,fr),l=s.useContext(no),d=l.panel,c=hn(d,i);return s.createElement("div",R({className:j("".concat(n,"-content"),o),role:"dialog",ref:c},Ne(t,{aria:!0}),{"aria-modal":"true"},r))};function en(e){return typeof e=="string"&&String(Number(e))===e?(di(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var tn={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function mr(e,t){var n,o,i,r=e.prefixCls,l=e.open,d=e.placement,c=e.inline,f=e.push,u=e.forceRender,g=e.autoFocus,m=e.keyboard,h=e.classNames,v=e.rootClassName,x=e.rootStyle,p=e.zIndex,y=e.className,b=e.id,C=e.style,S=e.motion,E=e.width,w=e.height,T=e.children,D=e.mask,k=e.maskClosable,I=e.maskMotion,L=e.maskClassName,q=e.maskStyle,O=e.afterOpenChange,_=e.onClose,X=e.onMouseEnter,oe=e.onMouseOver,ie=e.onMouseLeave,Q=e.onClick,ue=e.onKeyDown,le=e.onKeyUp,N=e.styles,F=e.drawerRender,ee=s.useRef(),W=s.useRef(),B=s.useRef();s.useImperativeHandle(t,function(){return ee.current});var A=function(de){var Be=de.keyCode,Ae=de.shiftKey;switch(Be){case Xe.TAB:{if(Be===Xe.TAB){if(!Ae&&document.activeElement===B.current){var _e;(_e=W.current)===null||_e===void 0||_e.focus({preventScroll:!0})}else if(Ae&&document.activeElement===W.current){var ft;(ft=B.current)===null||ft===void 0||ft.focus({preventScroll:!0})}}break}case Xe.ESC:{_&&m&&(de.stopPropagation(),_(de));break}}};s.useEffect(function(){if(l&&g){var U;(U=ee.current)===null||U===void 0||U.focus({preventScroll:!0})}},[l]);var V=s.useState(!1),se=Ve(V,2),Ce=se[0],Ee=se[1],G=s.useContext(Qt),He;typeof f=="boolean"?He=f?{}:{distance:0}:He=f||{};var we=(n=(o=(i=He)===null||i===void 0?void 0:i.distance)!==null&&o!==void 0?o:G==null?void 0:G.pushDistance)!==null&&n!==void 0?n:180,ut=s.useMemo(function(){return{pushDistance:we,push:function(){Ee(!0)},pull:function(){Ee(!1)}}},[we]);s.useEffect(function(){if(l){var U;G==null||(U=G.push)===null||U===void 0||U.call(G)}else{var de;G==null||(de=G.pull)===null||de===void 0||de.call(G)}},[l]),s.useEffect(function(){return function(){var U;G==null||(U=G.pull)===null||U===void 0||U.call(G)}},[]);var J=D&&s.createElement(Ke,R({key:"mask"},I,{visible:l}),function(U,de){var Be=U.className,Ae=U.style;return s.createElement("div",{className:j("".concat(r,"-mask"),Be,h==null?void 0:h.mask,L),style:z(z(z({},Ae),q),N==null?void 0:N.mask),onClick:k&&l?_:void 0,ref:de})}),qe=typeof S=="function"?S(d):S,Oe={};if(Ce&&we)switch(d){case"top":Oe.transform="translateY(".concat(we,"px)");break;case"bottom":Oe.transform="translateY(".concat(-we,"px)");break;case"left":Oe.transform="translateX(".concat(we,"px)");break;default:Oe.transform="translateX(".concat(-we,"px)");break}d==="left"||d==="right"?Oe.width=en(E):Oe.height=en(w);var To={onMouseEnter:X,onMouseOver:oe,onMouseLeave:ie,onClick:Q,onKeyDown:ue,onKeyUp:le},ko=s.createElement(Ke,R({key:"panel"},qe,{visible:l,forceRender:u,onVisibleChanged:function(de){O==null||O(de)},removeOnLeave:!1,leavedClassName:"".concat(r,"-content-wrapper-hidden")}),function(U,de){var Be=U.className,Ae=U.style,_e=s.createElement(gr,R({id:b,containerRef:de,prefixCls:r,className:j(y,h==null?void 0:h.content),style:z(z({},C),N==null?void 0:N.content)},Ne(e,{aria:!0}),To),T);return s.createElement("div",R({className:j("".concat(r,"-content-wrapper"),h==null?void 0:h.wrapper,Be),style:z(z(z({},Oe),Ae),N==null?void 0:N.wrapper)},Ne(e,{data:!0})),F?F(_e):_e)}),Ot=z({},x);return p&&(Ot.zIndex=p),s.createElement(Qt.Provider,{value:ut},s.createElement("div",{className:j(r,"".concat(r,"-").concat(d),v,zt(zt({},"".concat(r,"-open"),l),"".concat(r,"-inline"),c)),style:Ot,tabIndex:-1,ref:ee,onKeyDown:A},J,s.createElement("div",{tabIndex:0,ref:W,style:tn,"aria-hidden":"true","data-sentinel":"start"}),ko,s.createElement("div",{tabIndex:0,ref:B,style:tn,"aria-hidden":"true","data-sentinel":"end"})))}var hr=s.forwardRef(mr),pr=function(t){var n=t.open,o=n===void 0?!1:n,i=t.prefixCls,r=i===void 0?"rc-drawer":i,l=t.placement,d=l===void 0?"right":l,c=t.autoFocus,f=c===void 0?!0:c,u=t.keyboard,g=u===void 0?!0:u,m=t.width,h=m===void 0?378:m,v=t.mask,x=v===void 0?!0:v,p=t.maskClosable,y=p===void 0?!0:p,b=t.getContainer,C=t.forceRender,S=t.afterOpenChange,E=t.destroyOnClose,w=t.onMouseEnter,T=t.onMouseOver,D=t.onMouseLeave,k=t.onClick,I=t.onKeyDown,L=t.onKeyUp,q=t.panelRef,O=s.useState(!1),_=Ve(O,2),X=_[0],oe=_[1],ie=s.useState(!1),Q=Ve(ie,2),ue=Q[0],le=Q[1];Lt(function(){le(!0)},[]);var N=ue?o:!1,F=s.useRef(),ee=s.useRef();Lt(function(){N&&(ee.current=document.activeElement)},[N]);var W=function(Ce){var Ee;if(oe(Ce),S==null||S(Ce),!Ce&&ee.current&&!((Ee=F.current)!==null&&Ee!==void 0&&Ee.contains(ee.current))){var G;(G=ee.current)===null||G===void 0||G.focus({preventScroll:!0})}},B=s.useMemo(function(){return{panel:q}},[q]);if(!C&&!X&&!N&&E)return null;var A={onMouseEnter:w,onMouseOver:T,onMouseLeave:D,onClick:k,onKeyDown:I,onKeyUp:L},V=z(z({},t),{},{open:N,prefixCls:r,placement:d,autoFocus:f,keyboard:g,width:h,mask:x,maskClosable:y,inline:b===!1,afterOpenChange:W,ref:F},A);return s.createElement(no.Provider,{value:B},s.createElement(ln,{open:N||C||X,autoDestroy:!1,getContainer:b,autoLock:x&&(N||X)},s.createElement(hr,V)))};const oo=e=>{var t,n;const{prefixCls:o,title:i,footer:r,extra:l,loading:d,onClose:c,headerStyle:f,bodyStyle:u,footerStyle:g,children:m,classNames:h,styles:v}=e,x=lt("drawer"),p=s.useCallback(E=>s.createElement("button",{type:"button",onClick:c,"aria-label":"Close",className:`${o}-close`},E),[c]),[y,b]=Bn(at(e),at(x),{closable:!0,closeIconRender:p}),C=s.useMemo(()=>{var E,w;return!i&&!y?null:s.createElement("div",{style:Object.assign(Object.assign(Object.assign({},(E=x.styles)===null||E===void 0?void 0:E.header),f),v==null?void 0:v.header),className:j(`${o}-header`,{[`${o}-header-close-only`]:y&&!i&&!l},(w=x.classNames)===null||w===void 0?void 0:w.header,h==null?void 0:h.header)},s.createElement("div",{className:`${o}-header-title`},b,i&&s.createElement("div",{className:`${o}-title`},i)),l&&s.createElement("div",{className:`${o}-extra`},l))},[y,b,l,f,o,i]),S=s.useMemo(()=>{var E,w;if(!r)return null;const T=`${o}-footer`;return s.createElement("div",{className:j(T,(E=x.classNames)===null||E===void 0?void 0:E.footer,h==null?void 0:h.footer),style:Object.assign(Object.assign(Object.assign({},(w=x.styles)===null||w===void 0?void 0:w.footer),g),v==null?void 0:v.footer)},r)},[r,g,o]);return s.createElement(s.Fragment,null,C,s.createElement("div",{className:j(`${o}-body`,h==null?void 0:h.body,(t=x.classNames)===null||t===void 0?void 0:t.body),style:Object.assign(Object.assign(Object.assign({},(n=x.styles)===null||n===void 0?void 0:n.body),u),v==null?void 0:v.body)},d?s.createElement(Le,{active:!0,title:!1,paragraph:{rows:5},className:`${o}-body-skeleton`}):m),S)},vr=e=>{const t="100%";return{left:`translateX(-${t})`,right:`translateX(${t})`,top:`translateY(-${t})`,bottom:`translateY(${t})`}[e]},io=(e,t)=>({"&-enter, &-appear":Object.assign(Object.assign({},e),{"&-active":t}),"&-leave":Object.assign(Object.assign({},t),{"&-active":e})}),ao=(e,t)=>Object.assign({"&-enter, &-appear, &-leave":{"&-start":{transition:"none"},"&-active":{transition:`all ${t}`}}},io({opacity:e},{opacity:1})),xr=(e,t)=>[ao(.7,t),io({transform:vr(e)},{transform:"none"})],br=e=>{const{componentCls:t,motionDurationSlow:n}=e;return{[t]:{[`${t}-mask-motion`]:ao(0,n),[`${t}-panel-motion`]:["left","right","top","bottom"].reduce((o,i)=>Object.assign(Object.assign({},o),{[`&-${i}`]:xr(i,n)}),{})}}},yr=e=>{const{borderRadiusSM:t,componentCls:n,zIndexPopup:o,colorBgMask:i,colorBgElevated:r,motionDurationSlow:l,motionDurationMid:d,paddingXS:c,padding:f,paddingLG:u,fontSizeLG:g,lineHeightLG:m,lineWidth:h,lineType:v,colorSplit:x,marginXS:p,colorIcon:y,colorIconHover:b,colorBgTextHover:C,colorBgTextActive:S,colorText:E,fontWeightStrong:w,footerPaddingBlock:T,footerPaddingInline:D,calc:k}=e,I=`${n}-content-wrapper`;return{[n]:{position:"fixed",inset:0,zIndex:o,pointerEvents:"none",color:E,"&-pure":{position:"relative",background:r,display:"flex",flexDirection:"column",[`&${n}-left`]:{boxShadow:e.boxShadowDrawerLeft},[`&${n}-right`]:{boxShadow:e.boxShadowDrawerRight},[`&${n}-top`]:{boxShadow:e.boxShadowDrawerUp},[`&${n}-bottom`]:{boxShadow:e.boxShadowDrawerDown}},"&-inline":{position:"absolute"},[`${n}-mask`]:{position:"absolute",inset:0,zIndex:o,background:i,pointerEvents:"auto"},[I]:{position:"absolute",zIndex:o,maxWidth:"100vw",transition:`all ${l}`,"&-hidden":{display:"none"}},[`&-left > ${I}`]:{top:0,bottom:0,left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowDrawerLeft},[`&-right > ${I}`]:{top:0,right:{_skip_check_:!0,value:0},bottom:0,boxShadow:e.boxShadowDrawerRight},[`&-top > ${I}`]:{top:0,insetInline:0,boxShadow:e.boxShadowDrawerUp},[`&-bottom > ${I}`]:{bottom:0,insetInline:0,boxShadow:e.boxShadowDrawerDown},[`${n}-content`]:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"auto",background:r,pointerEvents:"auto"},[`${n}-header`]:{display:"flex",flex:0,alignItems:"center",padding:`${P(f)} ${P(u)}`,fontSize:g,lineHeight:m,borderBottom:`${P(h)} ${v} ${x}`,"&-title":{display:"flex",flex:1,alignItems:"center",minWidth:0,minHeight:0}},[`${n}-extra`]:{flex:"none"},[`${n}-close`]:Object.assign({display:"inline-flex",width:k(g).add(c).equal(),height:k(g).add(c).equal(),borderRadius:t,justifyContent:"center",alignItems:"center",marginInlineEnd:p,color:y,fontWeight:w,fontSize:g,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",textDecoration:"none",background:"transparent",border:0,cursor:"pointer",transition:`all ${d}`,textRendering:"auto","&:hover":{color:b,backgroundColor:C,textDecoration:"none"},"&:active":{backgroundColor:S}},vn(e)),[`${n}-title`]:{flex:1,margin:0,fontWeight:e.fontWeightStrong,fontSize:g,lineHeight:m},[`${n}-body`]:{flex:1,minWidth:0,minHeight:0,padding:u,overflow:"auto",[`${n}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center"}},[`${n}-footer`]:{flexShrink:0,padding:`${P(T)} ${P(D)}`,borderTop:`${P(h)} ${v} ${x}`},"&-rtl":{direction:"rtl"}}}},Cr=e=>({zIndexPopup:e.zIndexPopupBase,footerPaddingBlock:e.paddingXS,footerPaddingInline:e.padding}),ro=rt("Drawer",e=>{const t=$t(e,{});return[yr(t),br(t)]},Cr);var lo=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const wr={distance:180},so=e=>{const{rootClassName:t,width:n,height:o,size:i="default",mask:r=!0,push:l=wr,open:d,afterOpenChange:c,onClose:f,prefixCls:u,getContainer:g,style:m,className:h,visible:v,afterVisibleChange:x,maskStyle:p,drawerStyle:y,contentWrapperStyle:b}=e,C=lo(e,["rootClassName","width","height","size","mask","push","open","afterOpenChange","onClose","prefixCls","getContainer","style","className","visible","afterVisibleChange","maskStyle","drawerStyle","contentWrapperStyle"]),{getPopupContainer:S,getPrefixCls:E,direction:w,className:T,style:D,classNames:k,styles:I}=lt("drawer"),L=E("drawer",u),[q,O,_]=ro(L),X=g===void 0&&S?()=>S(document.body):g,oe=j({"no-mask":!r,[`${L}-rtl`]:w==="rtl"},t,O,_),ie=s.useMemo(()=>n??(i==="large"?736:378),[n,i]),Q=s.useMemo(()=>o??(i==="large"?736:378),[o,i]),ue={motionName:We(L,"mask-motion"),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500},le=A=>({motionName:We(L,`panel-motion-${A}`),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500}),N=An(),[F,ee]=bn("Drawer",C.zIndex),{classNames:W={},styles:B={}}=C;return q(s.createElement(sn,{form:!0,space:!0},s.createElement(yn.Provider,{value:ee},s.createElement(pr,Object.assign({prefixCls:L,onClose:f,maskMotion:ue,motion:le},C,{classNames:{mask:j(W.mask,k.mask),content:j(W.content,k.content),wrapper:j(W.wrapper,k.wrapper)},styles:{mask:Object.assign(Object.assign(Object.assign({},B.mask),p),I.mask),content:Object.assign(Object.assign(Object.assign({},B.content),y),I.content),wrapper:Object.assign(Object.assign(Object.assign({},B.wrapper),b),I.wrapper)},open:d??v,mask:r,push:l,width:ie,height:Q,style:Object.assign(Object.assign({},D),m),className:j(T,h),rootClassName:oe,getContainer:X,afterOpenChange:c??x,panelRef:N,zIndex:F}),s.createElement(oo,Object.assign({prefixCls:L},C,{onClose:f}))))))},jr=e=>{const{prefixCls:t,style:n,className:o,placement:i="right"}=e,r=lo(e,["prefixCls","style","className","placement"]),{getPrefixCls:l}=s.useContext(ye),d=l("drawer",t),[c,f,u]=ro(d),g=j(d,`${d}-pure`,`${d}-${i}`,f,u,o);return c(s.createElement("div",{className:g,style:n},s.createElement(oo,Object.assign({prefixCls:d},r))))};so._InternalPanelDoNotUseOrYouWillBeFired=jr;var Sr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},Er=function(t,n){return s.createElement(ce,R({},t,{ref:n,icon:Sr}))},nn=s.forwardRef(Er),$r=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const Tr=e=>{const{prefixCls:t,className:n,closeIcon:o,closable:i,type:r,title:l,children:d,footer:c}=e,f=$r(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:u}=s.useContext(ye),g=u(),m=t||u("modal"),h=xn(g),[v,x,p]=Gn(m,h),y=`${m}-confirm`;let b={};return r?b={closable:i??!1,title:"",footer:"",children:s.createElement(qn,Object.assign({},e,{prefixCls:m,confirmPrefixCls:y,rootPrefixCls:g,content:d}))}:b={closable:i??!0,title:l,footer:c!==null&&s.createElement(Fn,Object.assign({},e)),children:d},v(s.createElement(Ln,Object.assign({prefixCls:m,className:j(x,`${m}-pure-panel`,r&&y,r&&`${y}-${r}`,n,p,h)},f,{closeIcon:_n(m,o),closable:i},b)))},kr=Ei(Tr);function co(e){return tt(Jn(e))}const ge=Un;ge.useModal=sr;ge.info=function(t){return tt(Yn(t))};ge.success=function(t){return tt(Qn(t))};ge.error=function(t){return tt(eo(t))};ge.warning=co;ge.warn=co;ge.confirm=function(t){return tt(to(t))};ge.destroyAll=function(){for(;Ie.length;){const t=Ie.pop();t&&t()}};ge.config=or;ge._InternalPanelDoNotUseOrYouWillBeFired=kr;var Or={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},Pr=function(t,n){return s.createElement(ce,R({},t,{ref:n,icon:Or}))},Ir=s.forwardRef(Pr),Nr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},Rr=function(t,n){return s.createElement(ce,R({},t,{ref:n,icon:Nr}))},Mr=s.forwardRef(Rr),zr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},Lr=function(t,n){return s.createElement(ce,R({},t,{ref:n,icon:zr}))},Dr=s.forwardRef(Lr),Hr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"border",theme:"outlined"},Br=function(t,n){return s.createElement(ce,R({},t,{ref:n,icon:Hr}))},Ar=s.forwardRef(Br),_r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},Fr=function(t,n){return s.createElement(ce,R({},t,{ref:n,icon:_r}))},uo=s.forwardRef(Fr),Wr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},Vr=function(t,n){return s.createElement(ce,R({},t,{ref:n,icon:Wr}))},Gr=s.forwardRef(Vr),Ur={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},qr=function(t,n){return s.createElement(ce,R({},t,{ref:n,icon:Ur}))},Xr=s.forwardRef(qr),Kr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"},Zr=function(t,n){return s.createElement(ce,R({},t,{ref:n,icon:Kr}))},Jr=s.forwardRef(Zr),Yr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},Qr=function(t,n){return s.createElement(ce,R({},t,{ref:n,icon:Yr}))},el=s.forwardRef(Qr),tl={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"},nl=function(t,n){return s.createElement(ce,R({},t,{ref:n,icon:tl}))},ol=s.forwardRef(nl),il={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},al=function(t,n){return s.createElement(ce,R({},t,{ref:n,icon:il}))},rl=s.forwardRef(al),ll={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},sl=function(t,n){return s.createElement(ce,R({},t,{ref:n,icon:ll}))},fo=s.forwardRef(sl),cl={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 01144-53.5L537 318.9a32.05 32.05 0 000 45.3l124.5 124.5a32.05 32.05 0 0045.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"}}]},name:"tool",theme:"outlined"},dl=function(t,n){return s.createElement(ce,R({},t,{ref:n,icon:cl}))},ul=s.forwardRef(dl);const fl=M(({designStore:e,localStore:t,renderIdPanel:n})=>a.jsx("div",{style:{},children:n?n():null}));function go(){return{idOne:{id:"idOne",name:"一寸照片",width:295,height:413,widthInMillimeters:25,heightInMillimeters:35},idTwo:{id:"idTwo",name:"二寸照片",width:413,height:579,widthInMillimeters:35,heightInMillimeters:49},productMain:{id:"productMain",name:"商品主图",width:800,height:800,widthInMillimeters:0,heightInMillimeters:0},xhsCover:{id:"xhsCover",name:"小红书封面",width:1242,height:1660,widthInMillimeters:0,heightInMillimeters:0},poster:{id:"poster",name:"竖版海报(9:16)",width:1242,height:2208,widthInMillimeters:0,heightInMillimeters:0},longPoster:{id:"longPoster",name:"海报长图",width:800,height:2e3,widthInMillimeters:0,heightInMillimeters:0},phonePortrait:{id:"phonePortrait",name:"手机竖屏",width:1242,height:2688,widthInMillimeters:0,heightInMillimeters:0},gzh:{id:"gzh",name:"公众号",width:900,height:383,widthInMillimeters:0,heightInMillimeters:0}}}const gl="_CommonSubtleButton_keqof_1",ml={CommonSubtleButton:gl},fe=M(({onClick:e,style:t,children:n,active:o})=>a.jsx("div",{className:ml.CommonSubtleButton,style:{display:"inline-block",padding:"2px 6px",borderRadius:3,boxSizing:"border-box",cursor:"pointer",fontSize:12,lineHeight:"20px",...t,background:o?"#e8eaec":""},onClick:e,children:n}));function hl(e){const t=[];return Object.keys(e).forEach(n=>{const o=n,i=e[o];t.push({key:o,value:i})}),t}const pl=M(({designStore:e})=>{const{localStore:t}=e,n=t.selectedSingleLayer;if((n==null?void 0:n.nodeType)!=="TEXT")return null;const o=ui({localStore:t,layer:n});function i(){return o.fontStyle.size===1&&o.fontStyle.values().next().value==="ITALIC"}function r(){return o.textDecoration.size===1&&o.textDecoration.values().next().value==="UNDERLINE"}return a.jsxs(Te,{children:[a.jsx(Y,{children:a.jsxs("div",{style:{display:"flex"},children:[a.jsx(Pe,{style:{flex:1},optionMap:e.fontOptionMap,value:o.fontName.size===1?o.fontName.values().next().value:"--",onSelect:async({key:l})=>{var d,c;if((n==null?void 0:n.nodeType)==="TEXT"&&t.libra){e.currentModal="LoadingModal",await t.libra.fileData.fontStore.ensureFont({fontID:l,Raptor:t.libra.Raptor,fontProvider:t.libra.fileData.fontProvider});const f=Z(t);$e({localStore:t,layer:n,step:f,segmentData:{fontName:xe(l)}}),(c=(d=t.props).doAction)==null||c.call(d,f.getNewAction()),H(t),e.currentModal=""}}}),a.jsx("div",{style:{width:10}}),a.jsx(ae,{style:{width:130},addonBefore:"字号",value:o.fontSize.size===1&&o.fontSize.values().next().value||0,toFixed:1,onBlur:l=>{if(l>0){const d=Z(t);$e({localStore:t,layer:n,step:d,segmentData:{fontSize:l}}),H(t)}}})]})}),a.jsx(Y,{children:a.jsx(Re,{content:a.jsx("div",{children:hl(e.textEffectMap).map(l=>a.jsx("div",{children:a.jsx(fe,{active:!1,onClick:()=>{var c,f;const d=Z(t);$n({key:l.key,layer:n,step:d}),(f=(c=t.props).doAction)==null||f.call(c,d.getNewAction()),H(t)},children:l.key})},l.key))}),children:a.jsx(te,{size:"small",children:"文字特效"})})}),a.jsx(Y,{children:a.jsxs("div",{style:{display:"flex"},children:[a.jsx(fe,{style:{marginRight:5},active:i(),onClick:()=>{const l=Z(t);$e({localStore:t,layer:n,step:l,segmentData:{fontStyle:i()?"NORMAL":"ITALIC"}}),H(t)},children:a.jsx("div",{style:{height:20},children:"斜体"})}),a.jsx(fe,{style:{marginRight:5},active:r(),onClick:()=>{const l=Z(t);$e({localStore:t,layer:n,step:l,segmentData:{textDecoration:r()===!1?"UNDERLINE":"NONE"}}),H(t)},children:a.jsx("div",{style:{height:20},children:"下划线"})}),a.jsxs("div",{style:{display:"flex"},children:[a.jsx(fe,{active:n.textAlignHorizontal==="LEFT",onClick:()=>{const l=Z(t);$e({localStore:t,layer:n,step:l,globalData:{textAlignHorizontal:"LEFT"}}),H(t)},children:a.jsx(Oi,{})}),a.jsx(fe,{active:n.textAlignHorizontal==="CENTER",onClick:()=>{const l=Z(t);$e({localStore:t,layer:n,step:l,globalData:{textAlignHorizontal:"CENTER"}}),H(t)},children:a.jsx(Pi,{})}),a.jsx(fe,{active:n.textAlignHorizontal==="RIGHT",onClick:()=>{const l=Z(t);$e({localStore:t,layer:n,step:l,globalData:{textAlignHorizontal:"RIGHT"}}),H(t)},children:a.jsx(Ii,{})})]})]})}),a.jsxs(Y,{children:[a.jsx(fe,{style:{},active:n.textAutoResize==="WIDTH_AND_HEIGHT",onClick:()=>{const l=Z(t);Pt(t,n,"WIDTH_AND_HEIGHT",l),wt({localStore:t,layer:n,step:l}),H(t)},children:"宽高自适应"}),a.jsx(fe,{style:{marginRight:5},active:n.textAutoResize==="HEIGHT",onClick:()=>{const l=Z(t);Pt(t,n,"HEIGHT",l),wt({localStore:t,layer:n,step:l}),H(t)},children:"高度自适应"})]}),a.jsx(Y,{children:a.jsx(ae,{addonBefore:"行高系数",value:n.lineHeight.value,toFixed:1,onBlur:l=>{if(l>0){const d=Z(t);$e({localStore:t,layer:n,step:d,segmentData:{lineHeight:{value:l,units:"PERCENT"}}}),H(t)}}})})]})}),vl=M(({prefix:e,onChange:t,value:n})=>{const[o,i]=s.useState(()=>n);return s.useEffect(()=>{i(n)},[n]),a.jsx($i,{prefix:e?a.jsx("div",{style:{fontSize:10,marginRight:10},children:e}):null,size:"small",value:o,onChange:r=>{t(r.target.value)}})}),mo=M(({idStore:e,localStore:t})=>{const n=t.getSelectedLayerIdList().length>0;return a.jsx("div",{children:n?a.jsx(xl,{designStore:e,localStore:t}):a.jsx(yl,{idStore:e,localStore:t})})}),xl=M(({localStore:e,designStore:t})=>{var r,l;const n=e.selectedSingleLayer,o=n?n.rotate:e.bunchRectangle.rotate,i=Me(()=>({shapeOptionList:[{value:"Mask",label:"蒙版"},{value:"",label:"矩形"},{value:"Ellipse",label:"圆/椭圆"},{value:"Parallelogram",label:"平行四边形"},{value:"Pill",label:"胶囊"},{value:"Ribbon",label:"丝带"}]}));return a.jsxs("div",{children:[a.jsxs(Te,{title:"",children:[a.jsx("div",{style:{display:"none"},children:a.jsxs(Y,{children:[a.jsx(te,{size:"small",type:"text",onClick:()=>{Ri({localStore:e})},children:a.jsx(Ni,{})}),a.jsx(te,{size:"small",type:"text",onClick:()=>{var d,c;(c=(d=e.props).deleteLayersInStep)==null||c.call(d)},children:a.jsx(Mi,{})}),a.jsx(te,{size:"small",type:"text",onClick:()=>{var d,c;(c=(d=e.props).deleteLayersInStep)==null||c.call(d)},children:a.jsx(Dr,{})})]})}),a.jsx(Y,{children:a.jsxs("div",{style:{display:"flex"},children:[n?a.jsxs(a.Fragment,{children:[a.jsx(ae,{addonBefore:"X",toFixed:1,value:nt(n).leftTop.x,onBlur:d=>{var f,u;const c=Z(e);It({figmaLeft:d,figmaTop:nt(n).leftTop.y,layer:n,localStore:e,step:c}),(u=(f=e.props).doAction)==null||u.call(f,c.getNewAction()),H(e)}}),a.jsx("div",{style:{width:10}}),a.jsx(ae,{addonBefore:"Y",toFixed:1,value:nt(n).leftTop.y,onBlur:d=>{var f,u;const c=Z(e);It({figmaLeft:nt(n).leftTop.x,figmaTop:d,layer:n,localStore:e,step:c}),(u=(f=e.props).doAction)==null||u.call(f,c.getNewAction()),H(e)}}),a.jsx("div",{style:{width:10}})]}):null,a.jsx(ae,{addonBefore:"旋转",toFixed:1,value:o,onBlur:d=>{Lo(e,d-o),H(e)}})]})}),n?a.jsx(Y,{children:a.jsx("div",{style:{display:"flex"},children:a.jsx(ae,{addonBefore:"宽",value:n.width,toFixed:1,onBlur:d=>{var f,u;const c=Z(e);Do({localStore:e,width:d,step:c}),(u=(f=e.props).doAction)==null||u.call(f,c.getNewAction()),H(e)}})})}):null]}),(n==null?void 0:n.nodeType)==="TEXT"?a.jsx(pl,{designStore:t}):null,(n==null?void 0:n.nodeType)==="ROUNDED_RECTANGLE"?a.jsxs(Te,{children:[a.jsx(Y,{children:a.jsx(ae,{addonBefore:"圆角",toFixed:1,value:n.cornerRadius,onBlur:d=>{var f,u;const c=Z(e);c.update({layer:n,data:{cornerRadius:d}}),(u=(f=e.props).doAction)==null||u.call(f,c.getNewAction()),H(e)}})}),a.jsx(Y,{children:a.jsx(Ti,{style:{width:"100%"},prefix:a.jsx("div",{style:{fontSize:10,marginRight:10},children:"形状"}),size:"small",options:i.shapeOptionList,value:((r=n.smartShape)==null?void 0:r.type)||"",onSelect:(d,c)=>{var u,g;const f=Z(e);f.update({layer:n,data:{smartShape:c.value===""?void 0:na(c.value)}}),(g=(u=e.props).doAction)==null||g.call(u,f.getNewAction()),H(e)}})}),((l=n.smartShape)==null?void 0:l.type)==="Mask"?a.jsx(Y,{children:a.jsx(Re,{content:a.jsx(bl,{designStore:t,layer:n}),children:a.jsx(te,{size:"small",children:"配置蒙版"})})}):null]}):null,a.jsx(cn,{vIf:(n==null?void 0:n.nodeType)==="IMAGE",children:a.jsxs(Te,{title:"操作",children:[a.jsx(Y,{children:a.jsx(te,{onClick:async()=>{},children:"抠图"})}),a.jsx(Y,{children:a.jsx(te,{onClick:()=>{var d,c;if((n==null?void 0:n.nodeType)==="IMAGE"&&n.image){const f=Z(e);f.update({layer:n,data:{width:n.image.naturalWidth,height:n.image.naturalHeight}}),fi({layer:n,step:f}),(c=(d=e.props).doAction)==null||c.call(d,f.getNewAction()),Dt(e,{type:"clear"}),Dt(e,{type:"replace",idList:[n.id]}),H(e)}},children:"重置图片尺寸"})}),a.jsx(Y,{children:a.jsx(te,{onClick:()=>{Ho(e)},children:"裁剪"})})]})}),n&&n.nodeType!=="GROUP"?a.jsx(Tn,{localStore:e,node:n,instanceChain:[]}):null,n&&n.nodeType!=="GROUP"?a.jsx(zi,{localStore:e,layer:n,instanceChain:[]}):null,n&&n.nodeType!=="GROUP"?a.jsx(Li,{localStore:e,layer:n,instanceChain:[]}):null]})}),bl=M(({designStore:e,layer:t})=>a.jsx("div",{style:{display:"flex",flexDirection:"row"},children:Di("brush").map(n=>a.jsx("div",{style:{width:100,height:100,background:ne.backgroundColor,borderRadius:10,marginRight:10},onClick:async()=>{var o,i,r;if(((o=t.smartShape)==null?void 0:o.type)==="Mask"){wn(e.localStore).update({layer:t,data:{smartShape:{type:"Mask",url:n.url}}}),H(e.localStore);const d=Ye(e.localStore);d&&(await d.fileData.assetMap.ensureAsset(n.url),(r=(i=e.localStore.props).doAction)==null||r.call(i,{type:"RerenderCanvas"}))}},children:a.jsx("img",{alt:"",style:{display:"block",width:100,height:100,objectFit:"contain"},src:n.url})}))})),yl=M(({idStore:e,localStore:t})=>{const n=t.props.getCurrentPage();return a.jsxs("div",{children:[a.jsx(Te,{children:a.jsx(Y,{children:a.jsx(vl,{prefix:"文件名",value:t.props.getDocumentNode().name,onChange:o=>{t.props.getDocumentNode().name=o}})})}),a.jsxs(Te,{title:"页面尺寸",children:[a.jsx(Y,{children:a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx(ae,{style:{width:94,marginRight:8},toFixed:0,addonBefore:"宽",value:t.props.getPageSize().width,onBlur:o=>{var r,l;const i=Number(o);i<=0||i>4e3||i!==t.props.getPageSize().width&&((l=(r=t.props).changePageSize)==null||l.call(r,{width:i,height:t.props.getPageSize().height}))}}),a.jsx(ae,{style:{width:94},addonBefore:"高",toFixed:0,value:t.props.getPageSize().height,onBlur:o=>{var r,l;const i=Number(o);i<=0||i>4e3||i!==t.props.getPageSize().height&&((l=(r=t.props).changePageSize)==null||l.call(r,{width:t.props.getPageSize().width,height:i}))}})]})}),e?a.jsx(Y,{children:a.jsx(Pe,{prefix:"尺寸",optionMap:go(),onSelect:({value:o,key:i})=>{var r,l;e&&((l=(r=t.props).changePageSize)==null||l.call(r,{width:o.width,height:o.height}))},value:e.selectedSize})}):null]}),a.jsx(Tn,{localStore:t,node:n,instanceChain:[]})]})}),Cl=function({size:e,fill:t}){return a.jsx("svg",{className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:e,height:e,fill:t,style:{display:"block"},children:a.jsx("path",{d:"M542.9504 585.6768l-150.784 346.8288L164.352 158.0288l762.7008 350.8224zM245.2224 251.5968l156.2368 531.0976 99.8656-229.7088 5.3248-12.2624 255.8976-51.2z"})})},wl=function({size:e,fill:t}){return a.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:e,height:e,fill:t,style:{display:"block"},children:a.jsx("path",{d:"M870.4 204.8c-18.6368 0-36.1472 5.0176-51.2 13.7728V153.6a102.5024 102.5024 0 0 0-159.3856-85.0432C645.7856 28.672 607.7952 0 563.2 0S480.5632 28.672 466.5856 68.5568A102.5024 102.5024 0 0 0 307.2 153.6v377.4976L238.2848 411.648a99.6864 99.6864 0 0 0-61.3888-48.7936 95.5392 95.5392 0 0 0-74.8544 10.3424c-46.4384 27.8528-64.1536 90.8288-39.424 140.3904 1.536 3.1232 34.2016 70.0416 136.192 273.92 48.0256 96 100.7104 164.6592 156.6208 203.9808 43.8784 30.8736 74.1888 32.4608 79.8208 32.4608h256c43.5712 0 84.0704-14.1824 120.4224-42.0864 34.1504-26.2656 63.7952-64.256 88.064-112.8448 47.8208-95.6416 73.1136-227.9424 73.1136-382.6688v-179.2c0-56.4736-45.9264-102.4-102.4-102.4z m51.2 281.6c0 146.7904-23.3984 271.1552-67.6864 359.7312C825.0368 903.8848 773.3248 972.8 691.2 972.8H435.712c-1.9968-0.1536-23.552-2.56-56.064-26.88-32.4096-24.2688-82.176-75.3664-135.0656-181.248-103.7824-207.5648-135.68-272.9472-135.9872-273.5616l-0.1024-0.2048c-12.8512-25.7536-3.7376-59.4944 19.9168-73.6768a44.8512 44.8512 0 0 1 35.072-4.864 48.9472 48.9472 0 0 1 30.0544 24.1664l0.3072 0.512 79.9232 138.496c16.3328 29.8496 34.7136 42.3936 54.6304 37.3248 19.968-5.0688 30.0544-25.0368 30.0544-59.2384V153.6c0-28.2112 22.9888-51.2 51.2-51.2s51.2 22.9888 51.2 51.2v332.8a25.6 25.6 0 0 0 51.2 0V102.4c0-28.2112 22.9888-51.2 51.2-51.2s51.2 22.9888 51.2 51.2v384a25.6 25.6 0 0 0 51.2 0V153.6c0-28.2112 22.9888-51.2 51.2-51.2s51.2 22.9888 51.2 51.2v384a25.6 25.6 0 0 0 51.2 0V307.2c0-28.2112 22.9888-51.2 51.2-51.2s51.2 22.9888 51.2 51.2v179.2z"})})},ho=function({size:e,fill:t}){return a.jsx("svg",{viewBox:"0 0 24 24",width:e,height:e,xmlns:"http://www.w3.org/2000/svg",fill:t,style:{display:"block"},children:a.jsx("path",{d:"M8.59 4.534 5.83 7.25h8.67a6.25 6.25 0 1 1 0 12.5H8.998v-1.5H14.5a4.75 4.75 0 1 0 0-9.5H5.83l2.76 2.716-1.053 1.069L2.931 8l4.606-4.534z"})})},po=function({size:e,fill:t}){return a.jsx("svg",{viewBox:"0 0 24 24",width:e,height:e,xmlns:"http://www.w3.org/2000/svg",fill:t,style:{display:"block"},children:a.jsx("path",{d:"m15.41 4.534 2.76 2.717H9.5a6.25 6.25 0 1 0 0 12.499H15v-1.5H9.5a4.75 4.75 0 1 1 0-9.5h8.67l-2.76 2.717 1.053 1.069 4.606-4.535-4.606-4.535z"})})};async function vo({designStore:e}){const{localStore:t}=e,{libra:n}=t;n&&(e.loadingText="生成图片中...",e.currentModal="LoadingModal",await gi({libra:n,page:t.props.getCurrentPage(),layerList:[...t.getNormalLayerList()],filename:`design-${t.props.getDocumentNode().name||"新文件"}.png`}).catch(o=>{Qe.error("下载图片出错，请重试")}),e.loadingText="",e.currentModal="")}class xo{constructor(){this.errorList=[]}validate({documentNode:t}){return this.errorList=[],this.validateNode(t),{errorList:this.errorList}}validateNode(t){if(this.makeSure(t,t.id.length===36,"id长度不为36"),t.nodeType!=="DOCUMENT"){if(t.nodeType==="CANVAS")t.children.forEach(n=>{this.makeSure(t,n.parentId!=="","顶层图层parentId不为空字符串",o=>{o.children.forEach(i=>{i.parentId=""})})});else if(t.nodeType==="GROUP")t.children.forEach(n=>{this.makeSure(t,n.parentId===t.id,"子图层parentId不正常",o=>{o.children.forEach(i=>{i.parentId=o.id})}),this.validateNode(n)});else if(t.nodeType!=="ROUNDED_RECTANGLE")if(t.nodeType==="TEXT")this.validateTextLayer(t);else throw new Error(`不支持的图层类型:${t.nodeType}`)}}validateTextLayer(t){this.makeSure(t,typeof t.textAutoResize=="string","textAutoResize异常",n=>{n.textAutoResize="WIDTH_AND_HEIGHT"}),this.makeSure(t,t.fontStyle==="NORMAL"||t.fontStyle==="ITALIC","fontStyle异常",n=>{n.fontStyle="NORMAL"}),this.makeSure(t,t.textData.characters.length===t.textData.characterStyleIDs.length,"字符数量不等于styleID数量",n=>{n.textData.characterStyleIDs=n.textData.characters.split("").map(o=>0)})}makeSure(t,n,o,i){n===!1&&this.errorList.push({nodeID:t.id,message:o,fix:i})}}async function bo({doc:e,localStore:t}){const n=Ye(t);if(!n)throw new Error;if(!t.libra)throw new Error;const o=Sl({doc:e,fileData:n.fileData}),i=await mi({libra:t.libra,page:n.fileData.localStore.props.getCurrentPage(),layerList:n.fileData.localStore.props.getCurrentPage().children,isThumbnail:!0});return{id:e.id,document:JSON.stringify(e),images:o,thumbnail:i,createdAt:0,updatedAt:0}}function jl({doc:e}){const t=new Set;return e.children.forEach(n=>{jn(n,o=>{o.nodeType==="TEXT"&&t.add(o.fontName.fullname)})}),t}function Sl({doc:e,fileData:t}){const n={};function o(i){if(/^(http:|https:)/.test(i.imageSource))return;const r=t.assetMap.getAsset(i.imageSource);if(!(r!=null&&r.arrayBuffer))throw new Error;n[i.imageSource]=new Blob([r.arrayBuffer])}return e.children.forEach(i=>{jn(i,r=>{r.nodeType==="IMAGE"&&r.image&&o(r.image),r.nodeType==="ROUNDED_RECTANGLE"&&(r.image&&o(r.image),r.fillPaints.forEach(l=>{l.type==="IMAGE"&&o(l.image)}))})}),n}async function El({designStore:e}){console.log("Saving document: ",e.document);const t=new xo,{errorList:n}=t.validate({documentNode:e.document});if(n.length>0)throw new Error("文档格式有错误");const o=await bo({doc:e.document,localStore:e.localStore});e.database.putObject({tableName:"works",obj:o}),Qe.success("作品已成功保存")}async function $l({doc:e,fileData:t}){const{libra:n}=t.localStore;if(!n)return;const o=await bo({doc:e,localStore:t.localStore}),i=(await Sn(async()=>{const{default:c}=await import("./jszip.min-4GaxoQ8r.js").then(f=>f.j);return{default:c}},__vite__mapDeps([0,1]))).default,r=new i;r.file("document.json",o.document);const l=r.folder("images");ze.forEach(o.images,(c,f)=>{l==null||l.file(`${f}`,c)}),r.file("thumbnail.png",o.thumbnail);const d=await r.generateAsync({type:"blob"});hi({blob:d,filename:`设计-${e.name||"新文件"}.vzn`})}function Tl(){return pi()}async function kl({designStore:e,canvasElement:t,width:n,height:o,workID:i}){e.loadingText="正在加载WASM，请稍候...",e.currentModal="LoadingModal";const r=new Hi({database:e.database}),l=await vi({path:Bi("raptor"),localStore:e.localStore,elem:t,width:n,height:o,fontStore:r});if(e.loadingText="初始化本地数据库...",e.localStore.libra=l,await e.database.initDB(),console.log("Initialized indexedDB"),i){const d=await e.database.getWork(i);d?await yo({designStore:e,work:d,generateNewID:!1}):Qe.error("文件未找到"),e.loadingText="",e.currentModal=""}else await Ai({designStore:e})}async function yo({work:e,designStore:t,generateNewID:n}){var c,f;const o=JSON.parse(e.document);n&&(o.id=Tl());const i=Ye(t.localStore),r=new xo,{errorList:l}=r.validate({documentNode:o});if(l.length>0)throw Qe.error("文件已损坏"),new Error("");const d=jl({doc:o});i&&(t.loadingText="加载字体中...",await Promise.all(Array.from(d).map(u=>i.fileData.fontStore.ensureFont({fontID:u,Raptor:i.fileData.Raptor,fontProvider:i.fileData.fontProvider}))),await Promise.all(Object.keys(e.images).map(u=>e.images[u].arrayBuffer().then(m=>{i.fileData.assetMap.appendAsset({imageSource:u,buffer:m})}))),t.document=o,t.localStore.history.resetHistory(),console.log(e),console.log(t.localStore.history),st({localStore:t.localStore,workspaceState:t.localStore.workspaceState,workspaceElement:t.localStore.workspaceElement||void 0}),(f=(c=t.localStore.props).doAction)==null||f.call(c,{type:"RerenderCanvas"}))}const Co=M(({designStore:e})=>a.jsx(Re,{placement:"bottomLeft",arrow:!1,content:a.jsx(an,{children:()=>a.jsxs("div",{style:{lineHeight:"24px",fontSize:14},children:[a.jsxs("div",{onClick:()=>{window.confirm("未保存的内容将丢失，是否继续？")&&(window.location.href="./")},children:[a.jsx(ur,{})," ","新建作品"]}),a.jsxs("div",{onClick:()=>{El({designStore:e})},children:[a.jsx(Jr,{})," ","缓存作品"]}),a.jsxs("div",{onClick:()=>{e.currentModal="MyWorksModal"},children:[a.jsx(Xr,{})," ","缓存作品列表"]}),a.jsxs("div",{onClick:async()=>{var t;(t=e.localStore.libra)!=null&&t.fileData&&(e.loadingText="导出中...",e.currentModal="LoadingModal",await $l({doc:e.document,fileData:e.localStore.libra.fileData}).catch(()=>{}),e.currentModal="")},children:[a.jsx(Mr,{})," ","导出为.vzn文件"]}),a.jsxs("div",{onClick:async()=>{if(!await window.confirm("当前内容将会丢失，是否继续？"))return;const n=await Ki({multiple:!1,accept:[".zip"]}),i=await(await Sn(async()=>{const{default:f}=await import("./jszip.min-4GaxoQ8r.js").then(u=>u.j);return{default:f}},__vite__mapDeps([0,1]))).default.loadAsync(n.fileList[0]),r=i.filter(f=>f==="document.json")[0];if(!r)throw new Error;const l=await r.async("string"),d=await Promise.all(i.filter(f=>/^images\/./.test(f)).map(f=>f.async("blob").then(u=>({name:f.name.replace(/^images\//,""),blob:u})))),c={};d.forEach(f=>{c[f.name]=f.blob}),await yo({work:{document:l,images:c},designStore:e,generateNewID:!0}),Qe.success("导入完成")},children:[a.jsx(Ir,{})," ","导入.vzn文件"]})]})}),children:a.jsx("div",{className:"HomeIcon",style:{display:"inline-block",fontSize:20,height:24},children:a.jsx(el,{style:{display:"block"}})})})),Ol=M(({designStore:e,localStore:t})=>a.jsxs("div",{style:{padding:"10px 15px",borderBottom:"1px solid rgba(0, 0, 0, 0.08)"},children:[a.jsx("div",{style:{height:"100%",lineHeight:"32px",float:"left",width:230},children:a.jsx(Co,{designStore:e})}),a.jsxs("div",{style:{float:"left",display:"flex"},children:[a.jsx("div",{style:{padding:4,cursor:"pointer"},onClick:()=>{t.history.undo()},children:a.jsx(ho,{size:24,fill:t.history.canUndo?"":ne.disabledColor})}),a.jsx("div",{style:{padding:4,cursor:"pointer"},onClick:()=>{t.history.redo()},children:a.jsx(po,{size:24,fill:t.history.canRedo?"":ne.disabledColor})})]}),a.jsx("div",{style:{float:"right"},children:a.jsx(te,{icon:a.jsx(uo,{}),onClick:()=>{vo({designStore:e})},children:"下载"})})]})),Pl=M(({localStore:e,children:t,designStore:n,renderIdPanel:o})=>a.jsxs("div",{style:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",color:"#4c535c"},children:[a.jsx(Ol,{designStore:n,localStore:e}),a.jsxs("div",{style:{flex:1,display:"flex"},children:[a.jsx("div",{style:{width:230},children:a.jsx(fl,{designStore:n,localStore:e,renderIdPanel:()=>o()})}),a.jsxs("div",{style:{position:"relative",flex:1,background:"#f6f7f9",overflow:"hidden"},children:[t,a.jsxs("div",{style:{position:"absolute",right:20,bottom:20,background:"white",padding:10,borderRadius:4,display:"none"},children:[a.jsx("div",{style:{display:"inline-block",marginRight:10},children:`${(e.getPageScale()*100).toFixed(0)}%`}),a.jsx(Re,{placement:"topRight",content:a.jsx("div",{children:a.jsxs("div",{children:[a.jsx(kn,{checked:e.options.applyMagneticEffect,onClick:()=>{e.setOptions({applyMagneticEffect:!e.options.applyMagneticEffect})},style:{marginRight:6}}),"图层自动吸附"]})}),children:a.jsx(fo,{})})]})]}),a.jsx("div",{style:{width:230},children:a.jsx(mo,{idStore:n,localStore:e})})]})]})),Ct=M(({style:e,children:t,onClick:n})=>a.jsx("div",{style:e,onTouchStart:o=>{o.stopPropagation()},onPointerDown:o=>{o.stopPropagation()},onTouchEnd:o=>{o.stopPropagation()},onPointerUp:o=>{o.stopPropagation()},onClick:n,children:t})),Il=M(({designStore:e,localStore:t})=>a.jsx("div",{style:{position:"absolute",left:"50%",bottom:50,width:0,height:0},children:a.jsxs("div",{style:{transform:"translate(-50%, -50%)",background:"white",borderRadius:6,padding:6,boxShadow:ne.boxShadow,display:"inline-flex",lineHeight:"20px"},children:[a.jsx("div",{style:{padding:5,boxSizing:"border-box",cursor:"pointer",borderRadius:4,background:t.currentTool==="MoveTool"?ne.primaryColor:""},onClick:()=>{t.currentTool="MoveTool"},children:a.jsx(Cl,{size:20,fill:t.currentTool==="MoveTool"?"white":""})}),a.jsx("div",{style:{padding:5,boxSizing:"border-box",cursor:"pointer",borderRadius:4,background:t.currentTool==="HandTool"?ne.primaryColor:""},onClick:()=>{t.currentTool="HandTool"},children:a.jsx(wl,{size:20,fill:t.currentTool==="HandTool"?"white":""})}),a.jsx(Ct,{onClick:()=>{},children:a.jsx(Re,{styles:{body:{padding:5}},arrow:!1,content:()=>a.jsxs("div",{style:{pointerEvents:"auto"},children:[a.jsx(gt,{vIf:!0,children:a.jsxs("div",{onClick:()=>{_i({store:e})},children:[a.jsx(ol,{style:{marginRight:5}}),"添加图片"]})}),a.jsx(gt,{vIf:!0,children:a.jsxs("div",{onClick:()=>{Fi({store:e})},children:[a.jsx(Gr,{style:{marginRight:5}}),"添加文字"]})}),a.jsx(gt,{vIf:!0,children:a.jsxs("div",{onClick:()=>{Wi({designStore:e})},children:[a.jsx(Ar,{style:{marginRight:5}}),"添加图形"]})})]}),children:a.jsx("div",{style:{padding:5,boxSizing:"border-box",cursor:"pointer",borderRadius:4,fontSize:20},children:a.jsx(rl,{size:20})})})}),a.jsx(Ct,{style:{padding:5,boxSizing:"border-box",cursor:"pointer",borderRadius:4,fontSize:20},onClick:n=>{Ji({localStore:t,e:n})},children:a.jsx(ul,{size:20})}),a.jsx(Ct,{onClick:()=>{},children:a.jsx(Re,{arrow:!1,content:a.jsx("div",{style:{pointerEvents:"auto"},children:a.jsx("div",{children:a.jsxs("div",{children:[a.jsx(kn,{checked:t.options.applyMagneticEffect,onClick:()=>{t.setOptions({applyMagneticEffect:!t.options.applyMagneticEffect})},style:{marginRight:6}}),"图层自动吸附"]})})}),children:a.jsx("div",{style:{padding:5,boxSizing:"border-box",cursor:"pointer",borderRadius:4,fontSize:20},children:a.jsx(fo,{size:20})})})})]})})),Nl={Download:"Download",Page:"Page",Background_Color:"Background Color",Enable_snap:"Enable snap",Matting:"Matting"},Rl={Download:"下载",Page:"页面",Background_Color:"背景颜色",Enable_snap:"图层自动吸附",Matting:"抠图中"};function Ml({getReactiveLang:e}){return Zi({resourceMap:{cn:Rl,en:Nl},getReactiveLang:e})}const zl={hiringITEngineers:{title:`加入我们
放飞梦想`,subtitle:"2024恒科集团火热招聘中",sectionList:[{title:"Java架构师",content:`5年以上工作经验，精通Java语言。
对服务端架构有深刻的理解，熟悉主流技术架构体系。
熟悉缓存技术、集群与负载均衡、消息系统等领域。`},{title:"前端技术专家",content:`5年以上工作经验，精通Java语言。
对服务端架构有深刻的理解，熟悉主流技术架构体系。
熟悉缓存技术、集群与负载均衡、消息系统等领域。`},{title:"资深算法工程师",content:`5年以上工作经验，精通Java语言。
对服务端架构有深刻的理解，熟悉主流技术架构体系。
熟悉缓存技术、集群与负载均衡、消息系统等领域。`}],footer:{contact:"",address:""}},hiringCoffeeEmployee:{title:`加入我们
职等你来`,subtitle:"",sectionList:[{title:"咖啡店店长",content:`工作经验：3年
薪资待遇：4000-5000元/月
岗位职责：熟练掌握咖啡制作，具有一定的管理能力。`},{title:"咖啡店运营经理",content:`工作经验：1年
薪资待遇：7000-9000元/月
岗位职责：咖啡店活动的运营，具有一定的管理能力。`},{title:"咖啡店店员",content:`工作经验：1年
薪资待遇：4000-5000元/月
岗位职责：咖啡爱好者，熟悉咖啡制作流程。`}],footer:{contact:"",address:""}},hiringTextWorker:{title:`诚聘英才
加入我们`,subtitle:"",sectionList:[{title:"招聘岗位",content:"文案策划3名"},{title:"薪资待遇",content:"6000-10000不等，具体薪资面议"},{title:"任职要求",content:`1.优异的工作能力
2.认可公司的企业文化`}],footer:{contact:"",address:""}},teenagerTaekwondo:{title:`跆拳道培训
火热招生`,subtitle:"火热招生中",sectionList:[{title:"招生对象",content:"15-25岁青少年"},{title:"教学内容",content:`体能训练
跆拳道基础授课与实战
武德教育`},{title:"授课时间",content:"每日下午 16:00 - 18:00"}],footer:{contact:"",address:""}},congratulations:{title:"",subtitle:"",sectionList:[{title:`热烈祝贺
华北区销售代表王刚`,content:""},{title:"本月销售额突破1000W",content:""}],footer:{contact:"",address:""}}};function Ue({contentType:e}){return ze.cloneDeep(zl[e])}const wo="#ffffff",on=wo,jo={yanghong:{background:[K(320,100,67),on],title:on,subtitle:{background:"#000000",color:"#ffffff"},panel:{background:"#ffffff",titleBackground:K(320,100,67),titleColor:"#ffffff",contentColor:"#000000"},footer:{color:"#000000"}},redWhite:{background:[K(360,100,53),K(351,81,49)],title:wo,subtitle:{background:"",color:"#ffffff"},panel:{background:"",titleBackground:"",titleColor:"#ffffff",contentColor:"#ffffff"},footer:{color:"#ffffff"}},redGlow:{background:K(0,75,50),title:K(35,100,93),subtitle:{background:"",color:K(35,100,93)},panel:{background:"",titleBackground:"",titleColor:K(35,100,93),contentColor:"#fff1dd"},footer:{color:"#fff1dd"}},redGold:{background:["#d31f1f","#c60106"],title:["#ffe090","#fff2d9"],subtitle:{background:"",color:["#ffe090","#fff2d9"]},panel:{background:["#ffffff","#f4d4aa"],titleBackground:["#ee2c3b","#d2020b"],titleColor:"#ffffff",contentColor:"#ad0606"},footer:{color:["#ffe090","#fff2d9"]}},redOrange:{background:"#ff5652",title:"#fffefe",subtitle:{background:"#ffffff",color:"#ff5652"},panel:{background:"#fbfbfb",titleBackground:"#ff8426",titleColor:"#ffffff",contentColor:"#434242"},footer:{color:"#000000"}},red:{background:[K(0,81,51),K(38,100,70)],title:"#ffffff",subtitle:{background:"#000000",color:"#ffffff"},panel:{background:"#f5f2f1",titleBackground:"#f6302f",titleColor:"#ffffff",contentColor:"#000000"},footer:{color:"#000000"}},yellowPurple:{background:["#ffd95b","#ffc947"],title:["#887be9","#9b8ef8"],subtitle:{background:"#000000",color:"#ffffff"},panel:{background:"#ffffff",titleBackground:"#887be9",titleColor:"#ffffff",contentColor:"#4d4d4d"},footer:{color:"#000000"}},yellowWhite:{background:K(46,100,50),title:"#ffffff",subtitle:{background:"#000000",color:"#ffffff"},panel:{background:"#ffffff",titleBackground:"#000000",titleColor:"#ffffff",contentColor:"#000000"},footer:{color:"#000000"}},yellowRed:{background:["#fee9b2","#fedd9d"],title:"#fc442f",subtitle:{background:"#fc442f",color:"#ffffff"},panel:{background:"#fdfdfd",titleBackground:"#fc442f",titleColor:"#ffffff",contentColor:"#4d3d1c"},footer:{color:"#4d3d1c"}},gold:{background:["#faaf5b","#db8328"],title:"#fff2c8",subtitle:{color:"#fff2c8",background:""},panel:{background:"#fff2c9",titleBackground:"#e07e20",titleColor:"#fff2c8",contentColor:"#e07e20"},footer:{color:"#fff2c8"}},greenOrange:{background:"#bcd554",title:"#000000",subtitle:{background:"",color:"#000000"},panel:{background:"#fffdf1",titleBackground:"#fdb947",titleColor:"#050404",contentColor:"#050404"},footer:{color:"#050404"}},greenBright:{background:["#eafc70","#c5f135"],title:"#000000",subtitle:{background:"#000000",color:"#ffffff"},panel:{background:"#ffffff",titleBackground:"#c4f134",titleColor:"#000000",contentColor:"#000000"},footer:{color:"#000000"}},greenDark:{background:["#015e5f","#014d48"],title:["#e6d4a5","#fff4d7"],subtitle:{background:"",color:"#e6d4a5"},panel:{background:"",titleBackground:"",titleColor:"#e6d4a5",contentColor:"#ffffff"},footer:{color:"#ffffff"}},blueWhite:{background:[K(222,95,62),K(222,98,46)],title:"#ffffff",titleStroke:"#102788",subtitle:{background:"",color:"#ffffff"},panel:{background:"#ffffff",titleColor:"#ffffff",titleBackground:[K(222,95,62),K(222,98,46)],contentColor:"#102788"},footer:{color:"#ffffff"}},blueGold:{background:["#0c3190","#051643"],title:"#ffdca4",subtitle:{color:"#ffdca4",background:""},panel:{background:["#ffe1b0","#fed188"],titleBackground:"#021f67",titleColor:"#fffce3",contentColor:"#000000"},footer:{color:"#ffe7d1"}},grayOrange:{background:"#dbdbda",title:["#ff7c1b","#ffffff"],subtitle:{background:"",color:"#000000"},noPanel:{background:"",titleBackground:"#ff7c1b",titleColor:"#ffffff",contentColor:"#000000"},titleStroke:"#000000",footer:{color:"#000000"}},blackMint:{background:K(168,16,6),title:K(158,97,43),subtitle:{background:"",color:K(158,97,43)},panel:{background:"",titleBackground:K(158,97,43),titleColor:"#000000",contentColor:"#c7c7c7"},footer:{color:K(158,97,43)}}};function De(e){return ze.cloneDeep(jo[e])}function Ll(){return ze.cloneDeep(jo)}const Dl={theme:"招聘",style:"新潮",name:"程序员招聘",padding:80,colors:De("blackMint"),fonts:{title:"OPPOSans-H",sectionTitle:"OPPOSans-H",sectionContent:"SourceHanSansCN-Regular",content:"SourceHanSansCN-Regular"},title:{},sectionType:"Plain",structure:Ue({contentType:"hiringITEngineers"}),content:{}},Hl={theme:"招聘",style:"新潮",name:"程序员招聘",padding:80,colors:De("blueWhite"),fonts:{title:"OPPOSans-H",sectionTitle:"OPPOSans-H",sectionContent:"SourceHanSansCN-Regular",content:"SourceHanSansCN-Regular"},title:{},sectionType:"RoundCorneredPanel",structure:Ue({contentType:"hiringITEngineers"}),content:{}},Bl={theme:"招聘",style:"平面",name:"",padding:80,colors:De("blackYellow"),fonts:{title:"PangMenZhengDaoBiaoTiTi",sectionTitle:"OPPOSans-H",sectionContent:"SourceHanSansCN-Regular",content:"SourceHanSansCN-Regular"},title:{},sectionType:"FlatPanel",structure:Ue({contentType:"hiringTextWorker"}),content:{}},Al={theme:"招聘",style:"平面",name:"",padding:80,colors:De("yellowWhite"),fonts:{title:"PangMenZhengDaoBiaoTiTi",sectionTitle:"PangMenZhengDaoBiaoTiTi",sectionContent:"SourceHanSansCN-Regular",content:"SourceHanSansCN-Regular"},title:{stroke:{weight:.03,color:"#000000"}},sectionType:"RoundCorneredPanel",structure:Ue({contentType:"hiringCoffeeEmployee"}),content:{}},_l={theme:"招聘",style:"平面",name:"",padding:80,colors:De("grayOrange"),fonts:{title:"PangMenZhengDaoBiaoTiTi",sectionTitle:"OPPOSans-H",sectionContent:"SourceHanSansCN-Regular",content:"SourceHanSansCN-Regular"},title:{stroke:{weight:.03,color:"#000000"}},sectionType:"Plain",structure:Ue({contentType:"teenagerTaekwondo"}),content:{}},Fl=[Dl,Hl,Bl,Al,_l];function Wl(){return ze.cloneDeep(Fl)}function Vl(){return typeof window<"u"&&window.ontouchstart!==void 0}function St(){return typeof window<"u"&&/test=1/.test(window.location.href)}var Gl=Object.defineProperty,Ul=Object.getOwnPropertyDescriptor,he=(e,t,n,o)=>{for(var i=o>1?void 0:o?Ul(t,n):t,r=e.length-1,l;r>=0;r--)(l=e[r])&&(i=(o?l(t,n,i):l(i))||i);return o&&i&&Gl(t,n,i),i};Po({enforceActions:"never"});class me{constructor(){this.database=new Yi({name:"DesignDatabase"}),this.stepStore=new xi(()=>{}),this.designType="",this.templateList=Wl(),this.myWorkList=[],this.textEffectMap=Vi(),this.isMobile=!1,this.currentModal="",this.loadingText="",this.showDrawer="",this.renderText=Ml({getReactiveLang(){return"cn"}}),this.sizeOptionMap=go(),this.fontOptionMap=Gi(),this.selectionInfo=bi(),this.document=Qi({children:[Pn({children:[]})]}),this.rootStore=new ea,Io(this);const t=this;this.localStore=new yi({getNormalLayerList(){return t.page.children},props:{getDocumentNode(){return t.document},getCurrentPage(){return t.page},getSelectionInfo(){return t.selectionInfo},getPageSize(){return{width:t.page.width,height:t.page.height}},getPanelList(){return[]},getBackgroundLayer(){return null},getRootStore(){return t.rootStore},changePageSize({width:n,height:o}){var l,d;const{localStore:i}=t,r=Z(i);r.update({layer:t.page,data:{width:n,height:o}}),(d=(l=i.props).doAction)==null||d.call(l,r.getNewAction()),H(i),i.workspaceElement&&st({localStore:i,workspaceState:i.workspaceState,workspaceElement:i.workspaceElement})},changePageBackgroundColor(n){},deleteLayersInStep(){}}}),this.localStore.setOptions({useTextEditor:Vl()?"TEXTAREA":"ADVANCED_EDITOR"})}get selectedSize(){const{width:t,height:n}=this.page;let o="";return Object.keys(this.sizeOptionMap).forEach(i=>{const r=i,l=this.sizeOptionMap[r];l.width===t&&l.height===n&&(o=r)}),o}get page(){return this.document.children[0]}}he([be],me.prototype,"designType",2);he([be],me.prototype,"templateList",2);he([be],me.prototype,"myWorkList",2);he([be],me.prototype,"textEffectMap",2);he([be],me.prototype,"isMobile",2);he([be],me.prototype,"currentModal",2);he([be],me.prototype,"loadingText",2);he([be],me.prototype,"showDrawer",2);he([rn],me.prototype,"selectedSize",1);he([be],me.prototype,"selectionInfo",2);he([be],me.prototype,"document",2);he([rn],me.prototype,"page",1);const ql=M(({work:e})=>{const t=Me(()=>({src:""}));return s.useEffect(()=>(t.src=window.URL.createObjectURL(e.thumbnail),()=>{window.URL.revokeObjectURL(t.src)}),[]),a.jsx("div",{style:{padding:5},onClick:async()=>{window.confirm("即将打开新文件，未保存的内容将丢失，是否继续？")&&(window.location.href=`./?id=${e.id}`)},children:a.jsx("img",{alt:"",src:t.src,style:{display:"block",width:100,objectFit:"cover"}})})}),Xl=M(({designStore:e})=>{const t=Me(()=>({workList:[]}));return s.useEffect(()=>{e.database.getWorkList().then(n=>{n.forEach(o=>{t.workList.push(o)})})},[]),a.jsx(ge,{open:!0,centered:!0,maskClosable:!0,onOk:()=>{},onCancel:()=>!0,modalRender:()=>a.jsx(an,{children:()=>a.jsxs("div",{style:{pointerEvents:"auto",background:"white"},children:[a.jsxs("div",{style:{padding:"8px 15px",display:"flex",fontSize:16,justifyContent:"space-between",borderBottom:`1px solid ${ne.borderColor}`},children:[a.jsx("div",{children:"本地作品列表"}),a.jsx("div",{onClick:()=>{e.currentModal=""},children:a.jsx(Je,{})})]}),a.jsxs("div",{style:{padding:"8px 15px",maxHeight:400,overflow:"scroll"},onTouchMove:n=>{n.stopPropagation()},children:[a.jsx(Nn,{description:"本地作品仅保存在本地浏览器内，供临时保存，随时可能丢失，请尽快下载图片！",type:"error",style:{fontSize:14,padding:"10px 15px",lineHeight:1.6,marginBottom:10}}),a.jsx("div",{style:{margin:"0 -5px",display:"flex",flexWrap:"wrap"},children:t.workList.map(n=>a.jsx(ql,{work:n},n.id))})]})]})})})});function Kl({colorSetID:e,sectionType:t,overwrite:n,structure:o}){const i={colorSet:De(e),width:1242,height:2208,padding:80,logo:{width:60,height:60},title:{marginTop:50,fontSize:180,fontName:"OPPOSans-H",textEffect:"",italic:!0,textAlign:"left",rotate:0,stroke:{color:""}},subtitle:{marginTop:40,fontSize:60,fontName:"OPPOSans-H"},panel:{style:"Shadow",marginTop:60,padding:40,cornerRadius:0,border:0,title:{align:"left"},content:{marginTop:30}},section:{textAlign:"left",marginTop:60,type:t,title:{fontSize:40,fontName:"SourceHanSansCN-Bold",shape:"Rectangle",offsetX:!0},content:{fontSize:36,marginTop:20,fontName:"SourceHanSansCN-Regular",lineHeight:1.5}},footer:{fontSize:38},structure:Ue({contentType:o})};return Object.assign(i.title,n.title),So({template:i,id:e}),i}function So({template:e,id:t}){e.colorSet=De(t)}async function Zl({template:e,context:t}){await t.fileData.fontStore.ensureFont({fontID:e.title.fontName,Raptor:t.fileData.Raptor,fontProvider:t.fileData.fontProvider}),await t.fileData.fontStore.ensureFont({fontID:e.subtitle.fontName,Raptor:t.fileData.Raptor,fontProvider:t.fileData.fontProvider}),await t.fileData.fontStore.ensureFont({fontID:e.section.title.fontName,Raptor:t.fileData.Raptor,fontProvider:t.fileData.fontProvider}),await t.fileData.fontStore.ensureFont({fontID:e.section.content.fontName,Raptor:t.fileData.Raptor,fontProvider:t.fileData.fontProvider})}function Jl({left:e,top:t,template:n,localStore:o}){const{fontSize:i}=n.title,r=.04;if(n.title.textAlign==="apart"){const d=n.structure.title.split(`
`),c=[];d.forEach((u,g)=>{const m=Se(o,{width:10,height:10,text:u,fontSize:i,lineHeight$$:1.2,letterSpacing:0,italic:n.title.italic,fontName:xe(n.title.fontName)},h=>{h.left=e,h.top=t,h.textAutoResize="WIDTH_AND_HEIGHT",h.fillPaints=[re(n.colorSet.title)],n.title.stroke.color&&(h.strokeAlign="OUTSIDE",h.strokeWeight=r*i,h.strokePaints=[re(n.title.stroke.color)])});ve({localStore:o,layer:m,instanceChain:[],step:pe()}),c.push(m)}),c[0].left=n.padding,c[0].top=t,c[1].left=n.width-n.padding-c[1].width,c[1].top=t+c[0].top,n.title.rotate!==0&&(c[0].rotate=n.title.rotate,c[1].rotate=n.title.rotate);const f=ke({localStore:o,layerList:c});return{layerList:[f],totalHeight:f.height}}if(n.title.textAlign==="dazzle"){const d=n.structure.title.split(""),c=[];let f=0;d.forEach((m,h)=>{const v=Se(o,{width:10,height:10,text:m,fontSize:i,lineHeight$$:1.2,letterSpacing:0,italic:n.title.italic,fontName:xe(n.title.fontName)},p=>{p.left=e,p.top=t,p.textAutoResize="WIDTH_AND_HEIGHT",p.fillPaints=[re(n.colorSet.title)],n.title.stroke.color&&(p.strokeAlign="OUTSIDE",p.strokeWeight=r*i,p.strokePaints=[re(n.title.stroke.color)])});let x=1;h===0&&(ve({localStore:o,layer:v,instanceChain:[],step:pe()}),f=v.height),h%2===0?x+=Math.random()*.2:x-=Math.random()*.2,v.fontSize*=x,ve({localStore:o,layer:v,instanceChain:[],step:pe()}),c.push(v)});let u=e;c.forEach(m=>{m.left=u,u+=m.width*.8,m.top=t+f-m.height/2});const g=ke({localStore:o,layerList:c});return{layerList:[g],totalHeight:g.height}}const l=Se(o,{width:10,height:10,text:n.structure.title,fontSize:i,lineHeight$$:1.2,letterSpacing:0,italic:n.title.italic,fontName:xe(n.title.fontName)},d=>{d.left=e,d.top=t,d.textAutoResize="WIDTH_AND_HEIGHT",d.fillPaints=[re(n.colorSet.title)],n.title.stroke.color&&(d.strokeAlign="OUTSIDE",d.strokeWeight=r*i,d.strokePaints=[re(n.title.stroke.color)])});return n.title.textEffect&&$n({layer:l,key:n.title.textEffect,step:pe()}),ve({localStore:o,layer:l,instanceChain:[],step:pe()}),n.title.textAlign==="center"&&(l.textAlignHorizontal="CENTER",l.left=n.padding+(n.width-n.padding*2-l.width)/2),n.title.rotate&&(l.rotate=n.title.rotate),console.log(l.textData.characters,l.height),{layerList:[l],totalHeight:l.height}}function Yl({left:e,top:t,localStore:n,template:o}){const i=o.structure.subtitle,{subtitle:r}=o,l=Se(n,{width:10,height:10,text:i,fontSize:r.fontSize,lineHeight$$:1.2,letterSpacing:0,italic:o.title.italic,fontName:xe(r.fontName)},d=>{d.left=e,d.top=t,d.textAutoResize="WIDTH_AND_HEIGHT",d.fillPaints=[re(o.colorSet.subtitle.color)]});if(ve({localStore:n,layer:l,instanceChain:[],step:pe()}),o.colorSet.subtitle.background){const d=Eo({left:e,top:t,localStore:n,text:l,fillColor:o.colorSet.subtitle.background,type:"Pill"});if(o.title.textAlign!=="left"){const f=(o.width-d.width)/2-d.left;d.left+=f,d.children.forEach(u=>{u.left+=f})}return d}return l}function Eo({left:e,top:t,text:n,localStore:o,fillColor:i,type:r}){const l=Ze(o),{fontSize:d}=n;let c=.5,f=.2;r==="Ribbon"?(c=1,f=.2):r==="Pill"?(c=.8,f=.2):r==="Parallelogram"&&(c=.8);const u=d*c,g=d*f;return l.width=n.width+u*2,l.height=n.height+g*2,i&&(l.fillPaints=[re(i)]),r&&r!=="Rectangle"&&r!=="Mask"&&(l.smartShape={type:r}),l.left=e,l.top=t,n.left=l.left+u,n.top=l.top+g,ke({localStore:o,layerList:[l,n]})}async function Ql({source:e,localStore:t}){let n=null;const o=Ye(t);if(o){const{fileData:i}=o;if(n=await(await fetch(e)).arrayBuffer(),n){const{id:r}=i.assetMap.appendAsset({imageSource:e,buffer:n}),l=i.assetMap.getAsset(r);if(l!=null&&l.image){const d=wi();d.imageSource=r,d.naturalWidth=l.image.width(),d.naturalHeight=l.image.height();const c=Ze(t);return c.image=d,c}}}return null}function es({left:e,top:t,localStore:n,template:o}){const i=Ze(n);i.width=o.logo.width,i.height=o.logo.height,i.smartShape={type:"Ellipse"},i.fillPaints=[re(o.colorSet.title)],i.left=e,i.top=t;const r=Se(n,{width:1,height:1,text:"YOUR LOGO",lineHeight$$:1.2,letterSpacing:0,fontSize:30,fontName:xe(o.section.content.fontName)});return r.fillPaints=[re(o.colorSet.title)],r.textAutoResize="WIDTH_AND_HEIGHT",r.left=e+i.width+24,r.top=t+15,ve({localStore:n,layer:r,instanceChain:[],step:pe()}),ke({localStore:n,layerList:[i,r]})}function ts({localStore:e,left:t,top:n,width:o,section:i,template:r}){var u,g,m;const l=Se(e,{width:1,height:1,text:i.title,fontSize:r.section.title.fontSize,fontName:xe(r.section.title.fontName),lineHeight$$:1.2,letterSpacing:0});l.textAutoResize="WIDTH_AND_HEIGHT",ve({localStore:e,layer:l,instanceChain:[],step:pe()}),l.fillPaints=[re(((u=r.colorSet.panel)==null?void 0:u.titleColor)||"#ffffff")];const d=Eo({left:t,top:n,text:l,localStore:e,fillColor:(g=r.colorSet.panel)==null?void 0:g.titleBackground,type:r.section.title.shape});if(r.section.title.offsetX,r.section.textAlign==="center"){const h=r.width-r.padding*2-d.width;d.left+=h,d.children.forEach(v=>{v.left+=h})}n+=d.height+r.section.content.marginTop;const c=Se(e,{width:1,height:1,text:i.content,fontSize:r.section.content.fontSize,fontName:xe(r.section.content.fontName),lineHeight$$:r.section.content.lineHeight});return r.section.textAlign==="center"&&(c.textAlignHorizontal="CENTER"),c.textAutoResize="HEIGHT",c.width=o,ve({localStore:e,layer:c,instanceChain:[],step:pe()}),c.fillPaints=[re(((m=r.colorSet.panel)==null?void 0:m.contentColor)||"#ffffff")],c.left=t,c.top=n,ke({localStore:e,layerList:[d,c]})}function ns({localStore:e,left:t,top:n,width:o,template:i}){var h,v,x,p;const r=n;let{padding:l}=i.panel;const{cornerRadius:d}=i.panel;(h=i.colorSet.panel)!=null&&h.background||(l=0);const c=[],f=Ze(e);f.left=t,f.top=n,f.width=o,f.cornerRadius=d,f.fillPaints=[re((v=i.colorSet.panel)==null?void 0:v.background)],f.strokeWeight=4,i.panel.border>0&&(f.strokePaints=[En("#000000")]),f.strokeAlign="INSIDE",(x=i.colorSet.panel)!=null&&x.background&&c.push(f),t+=l,n+=l;const u=o-l*2,g=[];if(i.structure.sectionList.forEach((y,b)=>{b>0&&(n+=i.section.marginTop);const C=ts({left:t,top:n,localStore:e,width:u,section:y,template:i});n+=C.height,g.push(C)}),c.push(...g),f.height=n-r+l,(p=i.colorSet.panel)!=null&&p.background&&i.panel.style==="Shadow"){const y=Ze(e);y.width=f.width,y.height=f.height,y.left=f.left+20,y.top=f.top+20,y.fillPaints=[re("#000000")],c.unshift(y)}return ke({localStore:e,layerList:c})}async function os({context:e,localStore:t,template:n}){const o=Pn({children:[]});o.width=n.width,o.height=n.height,o.fillPaints=[re(n.colorSet.background),{type:"GRID",size:10,visible:!0}];const i=[],r=await Ql({source:"https://cdn.jsdelivr.net/gh/assetvoid/images/qr_code.png",localStore:t});await Zl({template:n,context:e});const{padding:l}=n,d=l;let c=0;c=l;{const u=es({localStore:t,left:d,top:c,template:n});i.push(u),c+=u.height}{c+=n.title.marginTop;const u=Jl({localStore:t,left:d,top:c,template:n});i.push(...u.layerList),c+=u.totalHeight}{c+=n.subtitle.marginTop;const u=Yl({left:d,top:c,localStore:t,template:n});i.push(u),c+=u.height}c+=n.panel.marginTop;const f=ns({localStore:t,left:d,top:c,width:o.width-n.padding*2,template:n});if(c+=f.height,i.push(f),r!=null&&r.image){r.width=200,r.height=200,r.left=1042-l,c=2008-l,r.top=c,Ci({frame:r,image:r.image});const u=n.structure.footer.contact||"联系电话：13800008888",g=n.structure.footer.address||"地址：上海市杨浦区赤峰路71号",m=Se(t,{width:10,height:10,text:u,fontSize:n.footer.fontSize,lineHeight$$:1.2,letterSpacing:0,fontName:xe(n.section.content.fontName)},p=>{p.textAutoResize="WIDTH_AND_HEIGHT",p.fillPaints=[re(n.colorSet.footer.color)]});ve({localStore:t,layer:m,instanceChain:[],step:pe()}),m.left=d,c+=m.fontSize*1,m.top=c,c+=m.height+m.fontSize*.8;const h=Se(t,{width:n.width-200-l-l,height:10,text:g,fontSize:n.footer.fontSize,lineHeight$$:1.2,letterSpacing:0,fontName:xe(n.section.content.fontName)},p=>{p.left=d,p.top=c,p.textAutoResize="HEIGHT",p.fillPaints=[re(n.colorSet.footer.color)]});ve({localStore:t,layer:h,instanceChain:[],step:pe()});const v=ke({localStore:t,layerList:[m,h]}),x=ke({localStore:t,layerList:[v,r]});i.push(x)}return o.children.length=0,o.children.push(...i),o}async function is({designStore:e,localStore:t,trueTemplate:n,isInitializing:o}){var d,c;const i=Ye(t);if(!i)return;e.currentModal="LoadingModal",e.loadingText="加载模板中...",console.log(n);const r=await os({context:i,localStore:t,template:n});e.currentModal="",e.loadingText="";const l=t.props.getDocumentNode();Z(t).update({layer:l,data:{life:{type:"replacePage",newPage:r}}}),l.children[0]=r,H(t),t.workspaceElement&&st({localStore:t,workspaceState:t.workspaceState,workspaceElement:t.workspaceElement}),(c=(d=t.props).doAction)==null||c.call(d,{type:"UpdateNodes",payload:{layerMap:{}}})}function as({designStore:e}){var t,n;e.page.width=1242,e.page.height=2208,st({localStore:e.localStore,workspaceState:e.localStore.workspaceState,workspaceElement:e.localStore.workspaceElement||void 0}),(n=(t=e.localStore.props).doAction)==null||n.call(t,{type:"RerenderCanvas"}),e.currentModal=""}const rs=M(({designStore:e})=>e.currentModal==="LoadingModal"?a.jsx(ge,{open:!0,centered:!0,modalRender:()=>a.jsxs("div",{style:{width:"100%",textAlign:"center",color:"white"},children:[a.jsx(ji,{style:{marginRight:5}}),e.loadingText]})}):e.currentModal==="MyWorksModal"?a.jsx(Xl,{designStore:e}):e.currentModal==="UploadImage"?a.jsx(ge,{open:!0,centered:!0,modalRender:()=>a.jsxs("div",{className:"UPLOAD",style:{width:"100%",textAlign:"center",color:"white",pointerEvents:"auto"},children:[a.jsxs(te,{type:"primary",onClick:async()=>{await Ui({designStore:e}),e.currentModal=""},children:["制作证件照",a.jsx(nn,{})]}),a.jsx("div",{style:{marginTop:15},children:a.jsxs(te,{type:"primary",onClick:async()=>{as({designStore:e})},children:["制作海报",a.jsx(nn,{})]})})]})}):null),ls=M(({designStore:e})=>a.jsx("div",{style:{width:"100%",height:200,overflow:"scroll",border:`1px solid ${ne.borderColor}`,boxSizing:"border-box",pointerEvents:"auto"},onTouchMove:t=>{t.stopPropagation()},children:Object.keys(e.sizeOptionMap).map(t=>{const n=t,o=e.sizeOptionMap[n];return a.jsx(cn,{hover:{background:ne.backgroundColor},children:a.jsxs("div",{style:{width:"100%",boxSizing:"border-box",padding:"6px 12px",cursor:"pointer",background:n===e.selectedSize?ne.activeBackgroundColor:""},onClick:()=>{var i,r;e.localStore.libra&&((r=(i=e.localStore.props).changePageSize)==null||r.call(i,{width:o.width,height:o.height}))},children:[a.jsx("div",{style:{fontSize:12,color:n===e.selectedSize?ne.activeTextColor:""},children:o.name}),a.jsxs("div",{style:{fontSize:12,color:ne.secondaryTextColor},children:[o.width,"px ","x"," ",`${o.height}px`]})]},n)})})})),ss=M(({designStore:e})=>{const t=Me(()=>({bgList:["#438edb","#e6070e","#ffffff"]}));return a.jsx("div",{style:{display:"flex",margin:"0 -2px"},children:t.bgList.map(n=>a.jsx("div",{style:{width:20,height:20,borderRadius:4,margin:2,background:n,boxSizing:"border-box",border:`1px solid ${ne.borderColor}`,cursor:"pointer"},onClick:()=>{var i,r;const o=Z(e.localStore);o.update({layer:e.page,data:{fillPaints(l){l.length=0,l.push(En(n))}}}),(r=(i=e.localStore.props).doAction)==null||r.call(i,o.getNewAction()),H(e.localStore)}}))})}),$o=M(({designStore:e})=>a.jsxs(a.Fragment,{children:[a.jsx(Te,{title:"尺寸选择",children:a.jsx(Y,{children:a.jsx(ls,{designStore:e})})}),a.jsx(Te,{title:"证件照背景颜色",children:a.jsx(Y,{children:a.jsx("div",{style:{display:"flex"},children:a.jsx(ss,{designStore:e})})})})]}));function it(e){return e?typeof e=="string"?e:`linear-gradient(${e[0]},${e[1]})`:"#ffffff"}const cs=M(({designStore:e})=>{const{localStore:t}=e;return a.jsxs("div",{style:{background:"white",padding:6,display:"flex",flexDirection:"row"},children:[a.jsxs("div",{style:{flex:1,display:"flex"},children:[a.jsx("div",{style:{width:100,fontSize:20,height:24},children:a.jsx(Co,{designStore:e})}),a.jsx("div",{style:{padding:2,marginRight:4,cursor:"pointer"},onClick:()=>{t.history.undo()},children:a.jsx(ho,{size:20,fill:t.history.canUndo?"":ne.disabledColor})}),a.jsx("div",{style:{padding:2,cursor:"pointer"},onClick:()=>{t.history.redo()},children:a.jsx(po,{size:20,fill:t.history.canRedo?"":ne.disabledColor})})]}),a.jsx(te,{size:"small",icon:a.jsx(uo,{}),onClick:async()=>{vo({designStore:e})},children:"下载"})]})}),ds=M(({localStore:e,designStore:t,children:n})=>{const o=Me(()=>({initialized:!1,height:"100vh",activeTab:""}));return o.initialized===!1&&typeof window<"u"&&(o.initialized=!0,o.height=`${window.innerHeight}px`),s.useEffect(()=>{function i(){o.height=`${window.innerHeight}px`}return window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}},[]),a.jsxs("div",{style:{width:"100%",height:o.height,display:"flex",flexDirection:"column"},children:[a.jsx(cs,{designStore:t}),a.jsx("div",{style:{flex:1,width:"100%",overflow:"hidden"},children:n}),a.jsx("div",{style:{height:200},children:a.jsxs("div",{style:{height:"100%",display:"flex",pointerEvents:"auto",flexDirection:"column",background:"white"},children:[a.jsxs("div",{style:{fontSize:16,padding:"10px 15px",borderBottom:`1px solid ${ne.borderColor}`,color:ne.activeTextColor,fontWeight:"bold",display:"flex"},children:[a.jsx(Re,{content:a.jsx("div",{children:a.jsx($o,{designStore:t})}),styles:{body:{padding:0}},trigger:"click",placement:"top",arrow:!1,children:a.jsx("div",{style:{marginRight:10},onClick:()=>{o.activeTab="size"},children:"证件照"})}),St()?a.jsx("div",{onClick:()=>{t.showDrawer="Templates"},children:"模板"}):null]}),a.jsx("div",{style:{flex:1,height:"100%",overflow:"scroll"},onTouchMove:i=>{i.stopPropagation()},onClick:i=>{i.stopPropagation()},children:a.jsx(mo,{idStore:t,localStore:e})})]})}),St()?a.jsx(so,{title:"Basic Drawer",height:200,open:t.showDrawer==="Templates",onClose:()=>{t.showDrawer=""},placement:"bottom",drawerRender:()=>a.jsx(us,{designStore:t})}):null]})}),us=M(({designStore:e})=>{const{localStore:t}=e,n=Me(()=>({shapeList:["Pill","Parallelogram","Ribbon"],textAlignMap:{left:{name:"left"},center:{name:"center"},right:{name:"right"},dazzle:{name:"dazzle"},apart:{name:"apart"}},trueTemplate:Kl({colorSetID:"blackMint",sectionType:"FlatPanel",overwrite:{title:{fontSize:180,textAlign:"left",rotate:0,italic:!0,fontName:"OPPOSans-H"}},structure:"hiringITEngineers"}),colorsMap:Ll(),initPoster(){is({designStore:e,localStore:t,trueTemplate:n.trueTemplate,isInitializing:!1})}}));return a.jsxs("div",{style:{background:"white",height:"100%",overflow:"scroll",pointerEvents:"auto"},onTouchMove:o=>{o.stopPropagation()},onClick:o=>{o.stopPropagation()},children:[a.jsx("div",{children:a.jsx(te,{onClick:()=>{var o,i;t.workspaceState.pageScale*=2,(i=(o=t.props).doAction)==null||i.call(o,{type:"UpdateNodes",payload:{layerMap:{}}})},children:"2x"})}),a.jsxs("div",{children:[a.jsx(fe,{active:!1,onClick:()=>{n.trueTemplate.width=1242,n.trueTemplate.height=2208},children:"1242 2208"}),a.jsx(fe,{active:!1,onClick:()=>{n.trueTemplate.width=1242,n.trueTemplate.height=2688},children:"1242 2688"}),a.jsx(fe,{active:!1,onClick:()=>{n.trueTemplate.width=800,n.trueTemplate.height=2e3},children:"800 2000"})]}),a.jsx("div",{children:a.jsx("textarea",{style:{width:"100%",height:"100"},onBlur:o=>{const i=JSON.parse(o.target.value);i.title&&(n.trueTemplate.structure=i)}})}),a.jsxs("div",{children:[a.jsx(Pe,{optionMap:n.textAlignMap,value:n.trueTemplate.title.textAlign,onSelect:({key:o})=>{n.trueTemplate.title.textAlign=o,n.initPoster()}}),a.jsxs("div",{style:{display:"flex"},children:[a.jsx(Pe,{optionMap:e.fontOptionMap,value:n.trueTemplate.title.fontName,onSelect:({key:o})=>{n.trueTemplate.title.fontName=o}}),a.jsx(Pe,{optionMap:qi,value:n.trueTemplate.title.textEffect,onSelect:({key:o})=>{n.trueTemplate.title.textEffect=o}}),a.jsx(ae,{value:n.trueTemplate.title.fontSize,toFixed:1,addonBefore:"字号",onBlur:o=>{n.trueTemplate.title.fontSize=o}}),a.jsx(ae,{value:n.trueTemplate.title.marginTop,toFixed:1,addonBefore:"上边距",onBlur:o=>{n.trueTemplate.title.marginTop=o}})]}),a.jsxs("div",{style:{display:"flex"},children:[a.jsx(Pe,{optionMap:e.fontOptionMap,value:n.trueTemplate.subtitle.fontName,onSelect:({key:o})=>{n.trueTemplate.subtitle.fontName=o}}),a.jsx(ae,{value:n.trueTemplate.subtitle.fontSize,toFixed:1,addonBefore:"字号",onBlur:o=>{n.trueTemplate.subtitle.fontSize=o}}),a.jsx(ae,{value:n.trueTemplate.subtitle.marginTop,toFixed:1,addonBefore:"上边距",onBlur:o=>{n.trueTemplate.subtitle.marginTop=o}})]})]}),a.jsxs("div",{children:[a.jsxs("div",{children:[a.jsx(ae,{toFixed:1,addonBefore:"上边距",value:n.trueTemplate.panel.marginTop,onBlur:o=>{n.trueTemplate.panel.marginTop=o}}),a.jsx(Pe,{optionMap:n.textAlignMap,value:n.trueTemplate.section.textAlign,onSelect:({key:o})=>{n.trueTemplate.section.textAlign=o,n.initPoster()}})]}),a.jsxs("div",{children:[a.jsx(fe,{active:!1,onClick:()=>{n.trueTemplate.panel.style=""},children:"无"}),a.jsx(fe,{active:!1,onClick:()=>{n.trueTemplate.panel.style="Shadow"},children:"阴影"})]}),n.shapeList.map(o=>a.jsx(te,{onClick:()=>{n.trueTemplate.section.title.shape=o,n.initPoster()},children:o}))]}),a.jsx(ae,{style:{width:100},addonBefore:"圆角",value:n.trueTemplate.panel.cornerRadius,onBlur:o=>{n.trueTemplate.panel.cornerRadius=o},toFixed:0}),a.jsx(ae,{style:{width:100},addonBefore:"边框",value:n.trueTemplate.panel.border,onBlur:o=>{n.trueTemplate.panel.border=o},toFixed:0}),a.jsx("div",{children:a.jsx(ae,{addonBefore:"内容字号",value:n.trueTemplate.section.content.fontSize,toFixed:0,onBlur:o=>{n.trueTemplate.section.content.fontSize=o,n.initPoster()}})}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap"},children:ze.map(n.colorsMap,(o,i)=>{var r;return a.jsxs("div",{style:{width:60,height:100,margin:5,background:it(o.background),overflow:"hidden"},onClick:()=>{So({id:i,template:n.trueTemplate}),n.initPoster()},children:[a.jsx("div",{style:{color:it(o.title),textAlign:"center",marginTop:5},children:"标题"}),a.jsxs("div",{style:{color:it(((r=o.panel)==null?void 0:r.contentColor)||""),fontSize:10,textAlign:"center"},children:["这是内容",a.jsx("br",{}),"这是内容",a.jsx("br",{}),"这是内容",a.jsx("br",{}),"这是内容",a.jsx("br",{})]})]})})})]})});M(({template:e})=>a.jsxs("div",{style:{position:"relative",width:1242,height:2204,background:it(e.colors.background),transform:"scale(0.1, 0.1)",transformOrigin:"0 0"},children:[a.jsxs("div",{style:{position:"absolute",left:60,top:60},children:[a.jsx("div",{style:{position:"absolute",width:100,height:100,borderRadius:50,background:"white"}}),a.jsx("div",{style:{position:"absolute",left:130,top:30,fontSize:40,color:"white",width:400},children:"YOUR LOGO"})]}),a.jsx("div",{style:{position:"absolute",left:10,top:200,borderRadius:2,fontSize:100,lineHeight:1.2,color:"white",width:"100%",textAlign:"center"},children:"解放钱包 疯狂省钱"})]}));const fs=M(({layer:e,localStore:t})=>(s.useEffect(()=>()=>{t.currentStep&&H(t)},[]),a.jsxs("div",{style:{position:"fixed",left:0,bottom:0,background:"white",width:"100%",height:200,zIndex:1e6,padding:10,boxSizing:"border-box",display:"flex",flexDirection:"column"},children:[a.jsx("textarea",{style:{background:"white",width:"100%",boxSizing:"border-box",border:`1px solid ${ne.borderColor}`,borderRadius:5,padding:8,flex:1},defaultValue:e.textData.characters,onChange:n=>{var i,r;const o=wn(t);o.update({layer:e,data:{textData(l){l.characters=n.target.value;const d=[];for(let c=0;c<l.characters.length;c+=1)d.push(0);l.characterStyleIDs=d}}}),ve({localStore:t,layer:e,instanceChain:[],step:o}),wt({localStore:t,layer:e,step:o}),(r=(i=t.props).doAction)==null||r.call(i,o.getNewAction())}}),a.jsx("div",{style:{marginTop:10},children:a.jsx(te,{type:"primary",size:"small",style:{width:"100%"},onClick:()=>{Bo(t)},children:"退出编辑"})})]}))),gs=M(({layer:e,localStore:t})=>(s.useEffect(()=>{var o;const{advancedTextEditor:n}=t;if(t.selectionInfo.textRange$.start=0,t.selectionInfo.textRange$.end=e.textData.characters.length,t.advancedTextEditor.inputText.compositionText="",t.advancedTextEditor.inputElement===null){const i=document.createElement("input");i.style.cssText+="position: fixed; left: 0; bottom: 0;",document.body.appendChild(i),t.advancedTextEditor.inputElement=i,i.addEventListener("input",()=>{console.log("input",i.value);const{start:r,end:l}=t.selectionInfo.textRange$;r!==l&&(console.log({start:r,end:l}),console.log(ze.cloneDeep(e)),Ao({localStore:t,start:r,length:l-r})),_o({localStore:t,str:i.value,mode:n.inputMode}),n.inputMode==="single"&&(i.value="")}),i.addEventListener("compositionstart",()=>{n.inputMode="composition",n.inputText={compositionText:"",start:t.selectionInfo.textRange$.start}}),i.addEventListener("compositionend",()=>{n.inputMode="single",i.value="",t.advancedTextEditor.inputText.compositionText=""})}return(o=n.inputElement)==null||o.focus(),n.inputMode="single",()=>{t.currentStep&&H(t),n.inputElement&&(document.body.removeChild(n.inputElement),n.inputElement=null)}},[]),null)),ms=M(({localStore:e})=>{const t=e.selectedSingleLayer;return e.editingText&&e.options.useTextEditor==="ADVANCED_EDITOR"&&(t==null?void 0:t.nodeType)==="TEXT"?a.jsx(gs,{localStore:e,layer:t}):e.editingText&&(t==null?void 0:t.nodeType)==="TEXT"&&e.options.useTextEditor==="TEXTAREA"?a.jsx(fs,{localStore:e,layer:t}):null}),hs=M(({designStore:e})=>a.jsx($o,{designStore:e})),ps=M(()=>{const[e]=s.useState(()=>new me),{localStore:t,stepStore:n}=e,o=s.useRef(null),i=s.useRef(null),r=Me(()=>({initialized:!0})),[l]=ta();s.useEffect(()=>{if(o.current&&i.current){const u=Ht(i.current),g=Bt(i.current);kl({designStore:e,canvasElement:o.current,width:u,height:g,workID:l.get("id")||void 0}).then(()=>{r.initialized=!0})}function f(){if(i.current&&t.libra){const u=Ht(i.current),g=Bt(i.current);Si({libra:t.libra,width:u,height:g})}}return e.localStore.shortcutMap["Meta + Z"]=()=>{e.localStore.history.undo()},e.localStore.shortcutMap["Shift + Meta + Z"]=()=>{e.localStore.history.redo()},window.addEventListener("resize",f),()=>{e.localStore.shortcutMap["Meta + Z"]=()=>{},window.removeEventListener("resize",f)}},[]),s.useEffect(()=>{t.libra&&(t.libra.canvasDirty=!0)},[t.getPageScale(),t.workspaceState.positionLeft,t.workspaceState.positionTop]);function d(){return a.jsx(hs,{designStore:e})}function c(){return a.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",background:"#f6f7f9"},ref:i,children:[a.jsx("canvas",{className:"main-canvas",style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none"},ref:o}),a.jsx(Fo,{localStore:t,stepStore:n,polygonStore:null}),a.jsx(Wo,{localStore:t,className:"",children:a.jsx("div",{style:{position:"relative",width:t.props.getPageSize().width*t.getPageScale(),height:t.props.getPageSize().height*t.getPageScale()},children:a.jsx(Vo,{stepStore:n,localStore:t,polygonStore:null,customOverlays:a.jsx("div",{}),menu:null})})}),a.jsx(Il,{designStore:e,localStore:t}),a.jsx(Xi,{localStore:t,designStore:e}),a.jsx(rs,{designStore:e}),a.jsx(ms,{localStore:t})]})}return r.initialized===!1?null:t.isMobile?a.jsx(ds,{localStore:t,designStore:e,children:c()}):a.jsx(Pl,{localStore:t,designStore:e,renderIdPanel:()=>d(),children:c()})}),vs={vconsole:{files:[{type:"js",url:"//unpkg.com/vconsole@3.15.0/dist/vconsole.min.js"}],loaded:!1}};async function xs(e){const t=vs[e];if(!t)throw new Error(`Invalid libKey: ${e}`);t.loaded!==!0&&await Promise.all(t.files.map(n=>n.type==="js"?bs(n):n.type==="css"?ys(n):Promise.resolve())).then(()=>{t.loaded=!0})}function bs(e){return new Promise((t,n)=>{try{const o=document.createElement("script");o.src=e.url,o.onload=()=>{t()},setTimeout(()=>{n(new Error(`Failed to load file: ${e.url}`))},1e4),document.body.appendChild(o)}catch{n()}})}function ys(e){return new Promise((t,n)=>{try{const o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.href=e.url,o.onload=()=>{t()},document.body.appendChild(o)}catch{n()}})}const Cs={ensure:xs},ws=async()=>{await Cs.ensure("vconsole"),new window.VConsole;const e=document.querySelector(".vc-mask"),t=document.createElement("div");e==null||e.appendChild(t),Oo.render($.createElement(js),t)},js=function(){const[e,t]=s.useState("");return a.jsx("div",{onClick:n=>{n.stopPropagation()},children:a.jsxs("div",{style:{textAlign:"right"},children:[a.jsx("input",{type:"text",placeholder:"请输入url",value:e,onChange:n=>t(n.target.value)}),a.jsx("button",{onClick:()=>{window.location.href=e},children:"Confirm"})," ",a.jsx("button",{onClick:()=>{window.location.reload()},children:"reload"})]})})},Hs=()=>[{title:"Very cool app"},{name:"description",content:"This app is the best"},{name:"viewport",content:"width=device-width,user-scalable=no,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0"}];function Bs(){const[e,t]=s.useState(()=>!1);return s.useEffect(()=>{St()?ws().then(()=>{t(!0)}):t(!0)},[]),e===!1?a.jsx("div",{style:{padding:100,textAlign:"center"},children:"Loading..."}):a.jsx(ps,{})}export{Bs as default,Hs as meta};
