import{r as x,j as e}from"./index-BpkY95s5.js";import{d as p}from"./index-CsSXPTiX.js";import{j as v,x as N,cw as S,e as b,cx as R,cy as A,cz as $,M as G,cA as D,aE as O}from"./index-Df-tj6Vq.js";import{C as f,c as z}from"./index-DZTG_-Tu.js";import{v as U,aa as V,ab as M,ac as F,C as j,J as y}from"./CommonWrapper-CHFdUGBu.js";import{I as g,S as B}from"./common-UDyMAhpN.js";import{P as W}from"./index-DtEu7O6T.js";function J({setContentType:o,stepStore:n,selectedLayer:t,localStore:s,collageInfo:a}){const l=v(()=>({timer:null,scaleVal:100,prevBackgroundColor:""}));function i(){return!!t.image}function c(){return!!t.image&&a.type!=="GridCollage"&&a.type!=="ConcatCollage"}function d(){return a.type!=="GridCollage"&&a.type!=="ConcatCollage"}function u(){return!(a.type==="PosterCollage"&&!b(t))}function w(){return!(a.type==="PosterCollage"&&(!t.image||!b(t)))}x.useEffect(()=>{t&&t.image&&(l.scaleVal=s.scalePercentDisplayed)},[t==null?void 0:t.id,s.scalePercentDisplayed]);const T=()=>{R(t),n.record("layerImageFlippedHorizontally")},P=()=>{A(t),n.record("layerImageFlippedVertically")},I=async()=>{a.type==="GridCollage"?n.record("DeletedGridPanelImage"):a.type==="ConcatCollage"&&n.record("DeletedConcatPanel")},_=()=>{o("mask")},E=()=>{o("filter")};return t?e.jsxs("div",{className:"ImageSettingDetails",children:[e.jsx("div",{className:"top-title",children:"图片设置"}),e.jsxs("div",{className:"btn-box",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{style:{width:"110px",display:u()?"":"none",flex:c()?"":"1"},children:e.jsxs("div",{className:"common-btn",onClick:r=>{},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M14.25 12.95V8.90477C13.3446 8.71476 12.6415 9.41949 11.9521 10.1105C11.1363 10.9281 10.3398 11.7265 9.24997 11C7.91804 10.112 6.74999 10.5 5.75 12.25V12.95C5.75 13.23 5.75 13.3701 5.8045 13.477C5.85243 13.5711 5.92892 13.6476 6.02301 13.6955C6.12996 13.75 6.26997 13.75 6.55 13.75H13.45C13.73 13.75 13.87 13.75 13.977 13.6955C14.0711 13.6476 14.1476 13.5711 14.1955 13.477C14.25 13.3701 14.25 13.23 14.25 12.95Z"}),e.jsx("path",{d:"M13.1206 4.5H6.87935C6.47687 4.49999 6.14468 4.49999 5.87409 4.5221C5.59304 4.54506 5.33469 4.59434 5.09202 4.71799C4.7157 4.90973 4.40973 5.2157 4.21799 5.59202C4.09434 5.83469 4.04506 6.09304 4.0221 6.37409C3.99999 6.64468 3.99999 6.97686 4 7.37933V12.6206C3.99999 13.0231 3.99999 13.3553 4.0221 13.6259C4.04506 13.907 4.09434 14.1653 4.21799 14.408C4.40973 14.7843 4.7157 15.0903 5.09202 15.282C5.33469 15.4057 5.59304 15.4549 5.87409 15.4779C6.14468 15.5 6.47686 15.5 6.87934 15.5H13.1207C13.5231 15.5 13.8553 15.5 14.1259 15.4779C14.407 15.4549 14.6653 15.4057 14.908 15.282C15.2843 15.0903 15.5903 14.7843 15.782 14.408C15.9057 14.1653 15.9549 13.907 15.9779 13.6259C16 13.3553 16 13.0231 16 12.6207V7.37934C16 6.97686 16 6.64468 15.9779 6.37409C15.9549 6.09304 15.9057 5.83469 15.782 5.59202C15.5903 5.2157 15.2843 4.90973 14.908 4.71799C14.6653 4.59434 14.407 4.54506 14.1259 4.5221C13.8553 4.49999 13.5231 4.49999 13.1206 4.5ZM5.54601 5.60899C5.62421 5.56915 5.73631 5.53669 5.95552 5.51878C6.18056 5.50039 6.47171 5.5 6.9 5.5H13.1C13.5283 5.5 13.8194 5.50039 14.0445 5.51878C14.2637 5.53669 14.3758 5.56915 14.454 5.60899C14.6422 5.70487 14.7951 5.85785 14.891 6.04601C14.9309 6.12421 14.9633 6.23631 14.9812 6.45552C14.9996 6.68056 15 6.97171 15 7.4V12.6C15 13.0283 14.9996 13.3194 14.9812 13.5445C14.9633 13.7637 14.9309 13.8758 14.891 13.954C14.7951 14.1422 14.6422 14.2951 14.454 14.391C14.3758 14.4308 14.2637 14.4633 14.0445 14.4812C13.8194 14.4996 13.5283 14.5 13.1 14.5H6.9C6.47171 14.5 6.18056 14.4996 5.95552 14.4812C5.73631 14.4633 5.62421 14.4308 5.54601 14.391C5.35785 14.2951 5.20487 14.1422 5.10899 13.954C5.06915 13.8758 5.03669 13.7637 5.01878 13.5445C5.00039 13.3194 5 13.0283 5 12.6V7.4C5 6.97171 5.00039 6.68056 5.01878 6.45552C5.03669 6.23631 5.06915 6.12421 5.10899 6.04601C5.20487 5.85785 5.35785 5.70487 5.54601 5.60899Z"}),e.jsx("path",{d:"M8.75 8C8.75 8.55228 8.30228 9 7.75 9C7.19772 9 6.75 8.55228 6.75 8C6.75 7.44771 7.19772 7 7.75 7C8.30228 7 8.75 7.44771 8.75 8Z"})]}),t.image?"替换":"添加图片"]})}),e.jsxs("div",{className:"common-btn",style:{width:"110px",display:c()?"":"none",flex:u()?"":"1"},onClick:()=>{U(s)},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 3.5C6.27614 3.5 6.5 3.72386 6.5 4V11.6C6.5 12.0283 6.50039 12.3194 6.51878 12.5445C6.53669 12.7637 6.56915 12.8758 6.60899 12.954C6.70487 13.1422 6.85785 13.2951 7.04601 13.391C7.12421 13.4309 7.23631 13.4633 7.45552 13.4812C7.68056 13.4996 7.97171 13.5 8.4 13.5H16C16.2761 13.5 16.5 13.7239 16.5 14C16.5 14.2761 16.2761 14.5 16 14.5H8.37934C7.97686 14.5 7.64468 14.5 7.37409 14.4779C7.09304 14.4549 6.83469 14.4057 6.59202 14.282C6.21569 14.0903 5.90973 13.7843 5.71799 13.408C5.59434 13.1653 5.54506 12.907 5.5221 12.6259C5.49999 12.3553 5.49999 12.0231 5.5 11.6206L5.5 4C5.5 3.72386 5.72386 3.5 6 3.5Z"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.5445 6.51878C12.3194 6.50039 12.0283 6.5 11.6 6.5H8.5C8.22386 6.5 8 6.27614 8 6C8 5.72386 8.22386 5.5 8.5 5.5L11.6206 5.5C12.0231 5.49999 12.3553 5.49999 12.6259 5.5221C12.907 5.54506 13.1653 5.59434 13.408 5.71799C13.7843 5.90973 14.0903 6.21569 14.282 6.59202C14.4057 6.83469 14.4549 7.09304 14.4779 7.37409C14.5 7.64469 14.5 7.97687 14.5 8.37936V11.5C14.5 11.7761 14.2761 12 14 12C13.7239 12 13.5 11.7761 13.5 11.5V8.4C13.5 7.97171 13.4996 7.68056 13.4812 7.45552C13.4633 7.23631 13.4309 7.12421 13.391 7.04601C13.2951 6.85785 13.1422 6.70487 12.954 6.60899C12.8758 6.56915 12.7637 6.53669 12.5445 6.51878Z"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 13.5C14.2761 13.5 14.5 13.7239 14.5 14V16C14.5 16.2761 14.2761 16.5 14 16.5C13.7239 16.5 13.5 16.2761 13.5 16V14C13.5 13.7239 13.7239 13.5 14 13.5Z"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 6C3.5 5.72386 3.72386 5.5 4 5.5H6C6.27614 5.5 6.5 5.72386 6.5 6C6.5 6.27614 6.27614 6.5 6 6.5H4C3.72386 6.5 3.5 6.27614 3.5 6Z"})]}),"裁剪"]})]}),e.jsxs("div",{style:{display:"flex",marginTop:"8px",justifyContent:"space-between"},children:[e.jsxs("div",{className:"common-btn",style:{display:i()?"":"none",width:"110px",flex:w()?"":"1"},onClick:E,children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M13.7107 8.2951C13.7366 8.11715 13.75 7.93514 13.75 7.75C13.75 5.67893 12.0711 4 10 4C7.92893 4 6.25 5.67893 6.25 7.75C6.25 7.93514 6.26342 8.11716 6.28933 8.29512C4.94393 8.86463 4 10.1971 4 11.75C4 13.8211 5.67893 15.5 7.75 15.5C8.59421 15.5 9.37326 15.221 10 14.7503C10.6268 15.221 11.4058 15.5 12.25 15.5C14.3211 15.5 16 13.8211 16 11.75C16 10.1971 15.0561 8.86462 13.7107 8.2951ZM10 5C11.5188 5 12.75 6.23122 12.75 7.75C12.75 8.84605 12.1088 9.79233 11.181 10.2342C10.5988 8.91821 9.28161 8 7.75 8C7.58537 8 7.42322 8.01061 7.2642 8.03118C7.25481 7.93873 7.25 7.84493 7.25 7.75C7.25 6.23122 8.48122 5 10 5ZM11.4607 11.2049C12.3387 10.8332 13.0457 10.1366 13.431 9.26579C14.3588 9.70765 15 10.6539 15 11.75C15 13.2688 13.7688 14.5 12.25 14.5C11.6847 14.5 11.1592 14.3294 10.7222 14.0369C11.2099 13.4039 11.5 12.6108 11.5 11.75C11.5 11.5649 11.4866 11.3828 11.4607 11.2049ZM7.75 9C9.26878 9 10.5 10.2312 10.5 11.75C10.5 13.2688 9.26878 14.5 7.75 14.5C6.23122 14.5 5 13.2688 5 11.75C5 10.2312 6.23122 9 7.75 9Z"})}),"滤镜"]}),e.jsxs("div",{className:"common-btn",style:{display:w()?"":"none",width:"110px",flex:i()?"":"1"},onClick:_,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.87935 4H13.1206C13.5231 3.99999 13.8553 3.99999 14.1259 4.0221C14.407 4.04506 14.6653 4.09434 14.908 4.21799C15.2843 4.40973 15.5903 4.7157 15.782 5.09202C15.9057 5.33469 15.9549 5.59304 15.9779 5.87409C16 6.14468 16 6.47686 16 6.87934V13.1207C16 13.5231 16 13.8553 15.9779 14.1259C15.9549 14.407 15.9057 14.6653 15.782 14.908C15.5903 15.2843 15.2843 15.5903 14.908 15.782C14.6653 15.9057 14.407 15.9549 14.1259 15.9779C13.8553 16 13.5231 16 13.1207 16H6.87934C6.47686 16 6.14468 16 5.87409 15.9779C5.59304 15.9549 5.33469 15.9057 5.09202 15.782C4.7157 15.5903 4.40973 15.2843 4.21799 14.908C4.09434 14.6653 4.04506 14.407 4.0221 14.1259C3.99999 13.8553 3.99999 13.5231 4 13.1206V6.87935C3.99999 6.47687 3.99999 6.14468 4.0221 5.87409C4.04506 5.59304 4.09434 5.33469 4.21799 5.09202C4.40973 4.7157 4.7157 4.40973 5.09202 4.21799C5.33469 4.09434 5.59304 4.04506 5.87409 4.0221C6.14469 3.99999 6.47687 3.99999 6.87935 4ZM5.95552 5.01878C5.73631 5.03669 5.62421 5.06915 5.54601 5.10899C5.35785 5.20487 5.20487 5.35785 5.10899 5.54601C5.06915 5.62421 5.03669 5.73631 5.01878 5.95552C5.00039 6.18056 5 6.47171 5 6.9V13.1C5 13.5283 5.00039 13.8194 5.01878 14.0445C5.03669 14.2637 5.06915 14.3758 5.10899 14.454C5.20487 14.6422 5.35785 14.7951 5.54601 14.891C5.62421 14.9309 5.73631 14.9633 5.95552 14.9812C6.18056 14.9996 6.47171 15 6.9 15H13.1C13.5283 15 13.8194 14.9996 14.0445 14.9812C14.2637 14.9633 14.3758 14.9309 14.454 14.891C14.6422 14.7951 14.7951 14.6422 14.891 14.454C14.9309 14.3758 14.9633 14.2637 14.9812 14.0445C14.9996 13.8194 15 13.5283 15 13.1V6.9C15 6.47171 14.9996 6.18056 14.9812 5.95552C14.9633 5.73631 14.9309 5.62421 14.891 5.54601C14.7951 5.35785 14.6422 5.20487 14.454 5.10899C14.3758 5.06915 14.2637 5.03669 14.0445 5.01878C13.8194 5.00039 13.5283 5 13.1 5H6.9C6.47171 5 6.18056 5.00039 5.95552 5.01878Z"}),e.jsx("path",{d:"M10.6561 7.07196C10.4449 7.02485 10.2254 7 10 7C8.34315 7 7.00001 8.34315 7.00001 10C7.00001 10.2254 7.02486 10.4449 7.07196 10.6561L10.6561 7.07196Z"}),e.jsx("path",{d:"M7.47647 11.6229L11.6229 7.47646C11.969 7.69946 12.2662 7.99169 12.495 8.33357L8.33357 12.495C7.99169 12.2662 7.69947 11.969 7.47647 11.6229Z"}),e.jsx("path",{d:"M9.28551 12.9144C9.5145 12.9703 9.75379 13 10 13C11.6569 13 13 11.6569 13 10C13 9.75378 12.9703 9.51449 12.9144 9.28551L9.28551 12.9144Z"})]}),"蒙版"]})]})]}),t.image?e.jsxs("div",{className:"controller-box",children:[e.jsxs("div",{className:"controller-item",style:{display:["FreeCollage","PosterCollage"].includes(a.type)?"none":""},children:[e.jsxs("div",{className:"controller-input",children:[e.jsx("span",{children:"旋转"}),e.jsx(g,{value:t.image.rotate,onChange:r=>{let C=Number(r.target.value);C>=180&&(C=180),C<=-180&&(C=-180),typeof C=="number"&&Number.isNaN(C)===!1&&V(s,t,C)},onPressEnter:()=>{n.record("UpdatedLayerImageRotation")},onBlur:()=>{n.record("UpdatedLayerImageRotation")},min:-180,max:180,disabled:!1})]}),e.jsx(f,{min:-180,max:180,value:t.image.rotate,tipFormatter:r=>`${r}`,onChange:r=>{t&&V(s,t,r)},onAfterChange:(r,C)=>{n.record("UpdatedLayerImageRotation")}})]}),e.jsxs("div",{className:"controller-item",style:{display:["FreeCollage","PosterCollage"].includes(a.type)?"none":""},children:[e.jsxs("div",{className:"controller-input",children:[e.jsx("span",{children:"缩放"}),e.jsx(g,{value:l.scaleVal,onChange:r=>{typeof l.timer=="number"&&(clearTimeout(l.timer),l.timer=null);let C=Number(r.target.value);Number.isNaN(C)&&(C=100),l.scaleVal=C,C>=300&&(C=300),C<=100&&(C=100),l.timer=setTimeout(()=>{if(typeof C=="number"&&Number.isNaN(C)===!1){const k=N(s);M(t,C,{step:k,enforceCoveringLayer:!0}),F(s,t),l.scaleVal=s.scalePercentDisplayed}},1e3)},onPressEnter:()=>{n.record("ScaledLayerImage")},onBlur:()=>{n.record("ScaledLayerImage")},min:100,max:300,disabled:!1})]}),e.jsx(f,{min:100,max:300,value:s.scalePercentDisplayed,tipFormatter:r=>`${r}%`,onChange:r=>{if(t){const C=N(s);M(t,r,{step:C,enforceCoveringLayer:!0})}},onAfterChange:(r,C)=>{F(s,t),n.record("ScaledLayerImage")}})]}),e.jsxs("div",{className:"controller-item",style:{marginTop:["FreeCollage","PosterCollage"].includes(a.type)?0:"24px"},children:[e.jsxs("div",{className:"controller-input",children:[e.jsx("span",{children:"不透明度"}),e.jsx(g,{value:Math.fround(t.image.opacity*100),onChange:r=>{let C=Number(r.target.value);C>=100&&(C=100),C<=0&&(C=0),typeof C=="number"&&Number.isNaN(C)===!1&&S(t,C)},onPressEnter:()=>{n.record("UpdatedLayerImageOpacity")},onBlur:()=>{n.record("UpdatedLayerImageOpacity")},min:0,max:100,disabled:!1})]}),e.jsx(f,{min:0,max:100,value:t.image.opacity*100,tipFormatter:r=>`${r}`,onChange:r=>{t&&S(t,r)},onAfterChange:(r,C)=>{n.record("UpdatedLayerImageOpacity")}})]}),e.jsxs("div",{className:"fill-color-box",style:{display:a.type==="GridCollage"?"flex":"none"},children:[e.jsx("div",{className:"right-title",children:"填充"}),e.jsx("div",{className:"color-picker-box"})]})]}):null,e.jsx(j,{vShow:s.selectionStatus==="singlePanel"&&!s.activeGroupLayerId,children:e.jsx(j,{vShow:!d(),children:e.jsxs("div",{className:"rotate-box",children:[e.jsx(y,{placement:"bottom",title:"左右翻转",children:e.jsxs("svg",{onClick:T,className:"rotate-item",viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12.8212 7.05378C12.409 6.65402 11.8119 6.51027 11.263 6.67863C10.9971 6.76015 10.8031 6.93602 10.6688 7.08634C10.5287 7.24329 10.397 7.43759 10.2696 7.64786C10.0186 8.06185 9.71906 8.64787 9.34425 9.3812L5.16136 17.5651C4.96718 17.945 4.79993 18.2722 4.69042 18.5454C4.5787 18.8242 4.48361 19.1467 4.53285 19.4949C4.60056 19.9736 4.86332 20.4031 5.25881 20.6812C5.54644 20.8835 5.8769 20.9456 6.17596 20.973C6.4691 20.9999 6.83657 20.9999 7.26322 20.9998H10.945C11.2174 20.9999 11.4625 20.9999 11.6664 20.9832C11.8848 20.9654 12.1168 20.925 12.3442 20.8091C12.6735 20.6413 12.9412 20.3736 13.109 20.0443C13.2249 19.8169 13.2653 19.5849 13.2831 19.3665C13.2998 19.1626 13.2998 18.9175 13.2997 18.6451L13.2997 10.3335C13.2997 9.50992 13.2998 8.85179 13.2647 8.36891C13.2469 8.12366 13.2181 7.89075 13.1647 7.6872C13.1136 7.49226 13.0208 7.24733 12.8212 7.05378ZM11.713 8.01888L11.7216 8.00943C11.7514 8.00891 11.7809 8.016 11.8071 8.03002L11.8105 8.04234C11.8319 8.12388 11.8529 8.2582 11.8684 8.47035C11.8993 8.89611 11.8997 9.50282 11.8997 10.3651V18.6198C11.8997 18.9254 11.8992 19.1125 11.8878 19.2525C11.8824 19.3177 11.8757 19.3571 11.8701 19.3811C11.8674 19.3925 11.8652 19.3995 11.8638 19.4033C11.863 19.4055 11.8624 19.4069 11.862 19.4078C11.8618 19.4083 11.8617 19.4086 11.8616 19.4087C11.828 19.4746 11.7745 19.5281 11.7086 19.5617C11.7084 19.5618 11.7068 19.5626 11.7032 19.5639C11.6994 19.5653 11.6924 19.5675 11.681 19.5702C11.657 19.5758 11.6176 19.5825 11.5524 19.5879C11.4124 19.5993 11.2253 19.5998 10.9197 19.5998H7.29513C6.82751 19.5998 6.52509 19.5991 6.30363 19.5789C6.12662 19.5627 6.06978 19.5382 6.06183 19.5344C5.98488 19.4793 5.93353 19.3954 5.91948 19.3018C5.91973 19.293 5.92382 19.2312 5.98994 19.0662C6.07267 18.8598 6.20968 18.5902 6.4225 18.1738L10.5764 10.0466C10.9689 9.27873 11.2454 8.7387 11.4667 8.37366C11.577 8.19177 11.6569 8.08176 11.713 8.01888Z"}),e.jsx("path",{d:"M15.1783 7.05378C15.5905 6.65402 16.1876 6.51027 16.7366 6.67863C17.0024 6.76015 17.1965 6.93602 17.3307 7.08634C17.4709 7.24329 17.6025 7.43759 17.73 7.64786C17.981 8.06185 18.2805 8.64787 18.6553 9.3812L22.8382 17.5651C23.0324 17.945 23.1996 18.2722 23.3091 18.5454C23.4209 18.8242 23.516 19.1467 23.4667 19.4949C23.399 19.9736 23.1362 20.4031 22.7408 20.6812C22.4531 20.8835 22.1227 20.9456 21.8236 20.973C21.5305 20.9999 21.163 20.9999 20.7363 20.9998H17.0545C16.7822 20.9999 16.5371 20.9999 16.3332 20.9832C16.1148 20.9654 15.8828 20.925 15.6553 20.8091C15.3261 20.6413 15.0583 20.3736 14.8906 20.0443C14.7747 19.8169 14.7343 19.5849 14.7164 19.3665C14.6998 19.1626 14.6998 18.9175 14.6998 18.6451L14.6998 10.3335C14.6998 9.50992 14.6998 8.85179 14.7349 8.36891C14.7527 8.12366 14.7815 7.89075 14.8349 7.6872C14.886 7.49226 14.9787 7.24733 15.1783 7.05378ZM16.2865 8.01888L16.2779 8.00943C16.2481 8.00891 16.2187 8.016 16.1924 8.03002L16.1891 8.04234C16.1677 8.12388 16.1466 8.2582 16.1312 8.47035C16.1003 8.89611 16.0998 9.50282 16.0998 10.3651V18.6198C16.0998 18.9254 16.1004 19.1125 16.1118 19.2525C16.1171 19.3177 16.1238 19.3571 16.1295 19.3811C16.131 19.3876 16.1324 19.3927 16.1336 19.3966C16.1344 19.3995 16.1352 19.4017 16.1357 19.4033C16.137 19.4069 16.1378 19.4085 16.138 19.4087C16.1715 19.4746 16.2251 19.5281 16.2909 19.5617C16.2912 19.5618 16.2927 19.5626 16.2964 19.5639C16.3002 19.5653 16.3072 19.5675 16.3186 19.5702C16.3425 19.5758 16.382 19.5825 16.4472 19.5879C16.5872 19.5993 16.7742 19.5998 17.0798 19.5998H20.7044C21.1721 19.5998 21.4745 19.5991 21.6959 19.5789C21.8729 19.5627 21.9298 19.5382 21.9377 19.5344C22.0147 19.4793 22.066 19.3954 22.0801 19.3018C22.0798 19.293 22.0757 19.2312 22.0096 19.0662C21.9269 18.8598 21.7899 18.5902 21.5771 18.1738L17.4231 10.0466C17.0307 9.27873 16.7541 8.7387 16.5328 8.37366C16.4226 8.19177 16.3427 8.08176 16.2865 8.01888Z"})]})}),e.jsx(y,{placement:"bottom",title:"上下翻转",children:e.jsxs("svg",{onClick:P,className:"rotate-item",viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M7.05378 12.8212C6.65402 12.409 6.51027 11.8119 6.67863 11.263C6.76015 10.9971 6.93602 10.8031 7.08634 10.6688C7.24329 10.5287 7.43759 10.397 7.64786 10.2696C8.06185 10.0186 8.64787 9.71906 9.3812 9.34425L17.5651 5.16136C17.945 4.96718 18.2722 4.79993 18.5454 4.69042C18.8242 4.5787 19.1467 4.48361 19.4949 4.53285C19.9736 4.60056 20.4031 4.86332 20.6812 5.25881C20.8835 5.54644 20.9456 5.8769 20.973 6.17596C20.9999 6.4691 20.9999 6.83657 20.9998 7.26322V10.945C20.9999 11.2174 20.9999 11.4625 20.9832 11.6664C20.9654 11.8848 20.925 12.1168 20.8091 12.3442C20.6413 12.6735 20.3736 12.9412 20.0443 13.109C19.8169 13.2249 19.5849 13.2653 19.3665 13.2831C19.1626 13.2998 18.9175 13.2998 18.6451 13.2997H10.3335C9.50992 13.2997 8.85179 13.2998 8.36891 13.2647C8.12366 13.2469 7.89075 13.2181 7.6872 13.1647C7.49226 13.1136 7.24734 13.0208 7.05378 12.8212ZM8.01888 11.7131L8.00943 11.7216C8.00891 11.7514 8.016 11.7809 8.03002 11.8071L8.04234 11.8105C8.12388 11.8319 8.2582 11.8529 8.47035 11.8684C8.89611 11.8993 9.50282 11.8997 10.3651 11.8997L18.6198 11.8997C18.9254 11.8997 19.1125 11.8992 19.2525 11.8878C19.3177 11.8824 19.3571 11.8757 19.3811 11.8701C19.3925 11.8674 19.3995 11.8652 19.4033 11.8638C19.4055 11.863 19.4069 11.8624 19.4078 11.862C19.4083 11.8618 19.4086 11.8617 19.4087 11.8616C19.4746 11.828 19.5281 11.7745 19.5617 11.7086C19.5618 11.7084 19.5626 11.7068 19.5639 11.7032C19.5653 11.6994 19.5675 11.6924 19.5702 11.681C19.5758 11.657 19.5825 11.6176 19.5879 11.5524C19.5993 11.4124 19.5998 11.2253 19.5998 10.9197V7.29513C19.5998 6.82751 19.5991 6.52509 19.5789 6.30363C19.5627 6.12662 19.5382 6.06978 19.5344 6.06183C19.4793 5.98488 19.3954 5.93353 19.3018 5.91948C19.293 5.91973 19.2312 5.92382 19.0662 5.98994C18.8598 6.07267 18.5902 6.20968 18.1738 6.4225L10.0466 10.5764C9.27873 10.9689 8.7387 11.2454 8.37366 11.4667C8.19177 11.577 8.08176 11.6569 8.01888 11.7131Z"}),e.jsx("path",{d:"M7.05378 15.1782C6.65402 15.5905 6.51027 16.1875 6.67863 16.7365C6.76015 17.0023 6.93602 17.1964 7.08634 17.3306C7.24329 17.4708 7.43759 17.6024 7.64786 17.7299C8.06185 17.9809 8.64787 18.2804 9.3812 18.6552L17.5651 22.8381C17.945 23.0323 18.2722 23.1996 18.5454 23.3091C18.8242 23.4208 19.1467 23.5159 19.4949 23.4666C19.9736 23.3989 20.4031 23.1362 20.6812 22.7407C20.8835 22.453 20.9456 22.1226 20.973 21.8235C20.9999 21.5304 20.9999 21.1629 20.9998 20.7363V17.0545C20.9999 16.7821 20.9999 16.537 20.9832 16.3331C20.9654 16.1147 20.925 15.8827 20.8091 15.6553C20.6413 15.326 20.3736 15.0583 20.0443 14.8905C19.8169 14.7746 19.5849 14.7342 19.3665 14.7164C19.1626 14.6997 18.9175 14.6997 18.6451 14.6997H10.3335C9.50994 14.6997 8.85178 14.6997 8.36891 14.7348C8.12366 14.7526 7.89075 14.7814 7.6872 14.8348C7.49226 14.8859 7.24734 14.9787 7.05378 15.1782ZM8.01888 16.2864L8.00943 16.2778C8.00891 16.2481 8.016 16.2186 8.03002 16.1923L8.04234 16.189C8.12388 16.1676 8.2582 16.1465 8.47035 16.1311C8.89611 16.1002 9.50282 16.0997 10.3651 16.0997L18.6198 16.0997C18.9254 16.0997 19.1125 16.1003 19.2525 16.1117C19.3177 16.117 19.3571 16.1237 19.3811 16.1294C19.3925 16.1321 19.3995 16.1343 19.4033 16.1357C19.4069 16.137 19.4085 16.1377 19.4087 16.1379C19.4746 16.1714 19.5281 16.225 19.5617 16.2908C19.5618 16.2911 19.5626 16.2926 19.5639 16.2963C19.5653 16.3001 19.5675 16.3071 19.5702 16.3185C19.5758 16.3424 19.5825 16.3819 19.5879 16.4471C19.5993 16.5871 19.5998 16.7742 19.5998 17.0797V20.7044C19.5998 21.172 19.5991 21.4744 19.5789 21.6958C19.5627 21.8729 19.5382 21.9297 19.5344 21.9376C19.4793 22.0146 19.3954 22.066 19.3018 22.08C19.293 22.0798 19.2312 22.0757 19.0662 22.0095C18.8598 21.9268 18.5902 21.7898 18.1738 21.577L10.0466 17.423C9.27873 17.0306 8.7387 16.7541 8.37366 16.5327C8.19177 16.4225 8.08176 16.3426 8.01888 16.2864Z"})]})}),e.jsx(y,{placement:"bottom",title:"删除",children:e.jsxs("svg",{onClick:I,className:"rotate-item",viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12.9492 5.25C12.5626 5.25 12.2492 5.5634 12.2492 5.95C12.2492 6.3366 12.5626 6.65 12.9492 6.65H15.0492C15.4358 6.65 15.7492 6.3366 15.7492 5.95C15.7492 5.5634 15.4358 5.25 15.0492 5.25H12.9492Z"}),e.jsx("path",{d:"M12.2492 11.55C12.6358 11.55 12.9492 11.8634 12.9492 12.25V17.5C12.9492 17.8866 12.6358 18.2 12.2492 18.2C11.8626 18.2 11.5492 17.8866 11.5492 17.5V12.25C11.5492 11.8634 11.8626 11.55 12.2492 11.55Z"}),e.jsx("path",{d:"M15.7492 11.55C16.1358 11.55 16.4492 11.8634 16.4492 12.25V17.5C16.4492 17.8866 16.1358 18.2 15.7492 18.2C15.3626 18.2 15.0492 17.8866 15.0492 17.5V12.25C15.0492 11.8634 15.3626 11.55 15.7492 11.55Z"}),e.jsx("path",{d:"M5.94922 8.4C5.94922 8.0134 6.26262 7.7 6.64922 7.7H21.3492C21.7358 7.7 22.0492 8.0134 22.0492 8.4C22.0492 8.7866 21.7358 9.1 21.3492 9.1H20.2624L19.7685 18.2371C19.7396 18.7725 19.7156 19.2153 19.6672 19.5758C19.6167 19.951 19.5334 20.2942 19.3547 20.6145C19.0766 21.1129 18.6528 21.5143 18.1403 21.7651C17.8108 21.9263 17.4635 21.9909 17.0862 22.0211C16.7236 22.05 16.2801 22.05 15.744 22.05H12.2545C11.7183 22.05 11.2748 22.05 10.9122 22.0211C10.5349 21.9909 10.1877 21.9263 9.85818 21.7651C9.34559 21.5143 8.92188 21.1129 8.64378 20.6145C8.465 20.2942 8.38172 19.951 8.33127 19.5758C8.28279 19.2153 8.25886 18.7725 8.22993 18.2371L7.73603 9.1H6.64922C6.26262 9.1 5.94922 8.7866 5.94922 8.4ZM9.13808 9.1L9.62638 18.1336C9.65721 18.7039 9.67864 19.0907 9.71878 19.3893C9.75779 19.6794 9.8081 19.828 9.86627 19.9323C10.0053 20.1814 10.2172 20.3821 10.4735 20.5075C10.5807 20.56 10.7318 20.6022 11.0237 20.6255C11.3239 20.6495 11.7113 20.65 12.2825 20.65H15.7159C16.2871 20.65 16.6745 20.6495 16.9748 20.6255C17.2666 20.6022 17.4177 20.56 17.525 20.5075C17.7813 20.3821 17.9931 20.1814 18.1322 19.9323C18.1903 19.828 18.2406 19.6794 18.2797 19.3893C18.3198 19.0907 18.3412 18.7039 18.3721 18.1336L18.8604 9.1H9.13808Z"})]})})]})})})]}):null}const q=p(J);function K({selectedLayer:o,stepStore:n,localStore:t,workspaceState:s,collageInfo:a}){const l=v(()=>({contentType:"details",preSelectectedLayerId:""})),i=d=>{l.contentType=d};if(x.useEffect(()=>{i("details"),setTimeout(()=>{o&&(l.preSelectectedLayerId=o.id)})},[o]),x.useEffect(()=>{if(l.contentType!=="filter"){const d=$(t,l.preSelectectedLayerId);d&&d.nodeType==="IMAGE"&&z(t,d)}},[l.contentType]),!o)return null;const c=()=>e.jsx("div",{style:{height:"100%"},children:e.jsx(j,{vShow:l.contentType==="details",style:{width:"100%",height:"100%"},children:e.jsx(q,{localStore:t,collageInfo:a,setContentType:i,stepStore:n,selectedLayer:o})})});return e.jsx("div",{className:"ImageSettings",onClick:d=>{d.stopPropagation()},onPointerDown:d=>{d.stopPropagation()},children:c()})}const h1=p(K);h.defaultProps={className:"",color:"",onClick:()=>{},fontSize:36};function h({name:o,color:n,onClick:t,fontSize:s,className:a=""}){return e.jsx("span",{style:{color:n,width:`${s}px`,height:`${s}px`,display:"block",fontSize:`${s}px`},onClick:l=>{t&&t(l)},className:G("iconfont",`icon-${o}`,a)})}const Q="_advanceStyleEffect_1m2cx_15",X="_advanceStyleClear_1m2cx_22",Y="_advanceStyleClearTitle_1m2cx_31",e1="_addStyleSettingBtn_1m2cx_36",t1="_advanceStyleSettingBtn_1m2cx_54",n1="_currentAdvanceStyle_1m2cx_64",a1="_advanceStyleTitle_1m2cx_78",s1="_fontFamily_1m2cx_100",m={advanceStyleEffect:Q,advanceStyleClear:X,advanceStyleClearTitle:Y,addStyleSettingBtn:e1,advanceStyleSettingBtn:t1,currentAdvanceStyle:n1,advanceStyleTitle:a1,fontFamily:s1},C1=p(o=>{const n=v(()=>({inputValue:"",inputOnchange:!1,isChange:!1}));x.useEffect(()=>{n.inputValue=o.value},[o.value]);function t(s){const{onChange:a}=o;n.isChange&&a&&(a(s),n.isChange=!1)}return e.jsx(g,{...o,value:n.inputValue,onCompositionStart:()=>{n.inputOnchange=!0},onChange:s=>{n.isChange=!0,n.inputValue=s.target.value,n.inputOnchange||t(s)},onCompositionEnd:s=>{n.inputOnchange=!1,t(s)}})}),{Option:H,OptGroup:L}=B,l1=p(({color:o,textShadow:n,textStroke:t,textGlow:s,isClear:a})=>a?e.jsxs("div",{className:m.advanceStyleClear,children:[e.jsx(h,{name:"slashCircle",className:m.advanceStyleClearSvg,fontSize:30}),e.jsx("div",{className:m.advanceStyleClearTitle,children:"清除样式"})]}):e.jsxs("div",{children:[e.jsx("div",{className:m.advanceStyleEffect,style:{fontSize:"20px",lineHeight:1,...D(s.map(l=>({...l,hidden:!1})),n.map(l=>({...l,hidden:!1})),t.map(l=>({...l,hidden:!1})),!1)},children:"A"}),e.jsx("div",{className:m.advanceStyleEffect,style:{color:`${o}`,fontSize:"20px",lineHeight:1},children:"A"})]})),Z=null,x1=p(({fontGroupList:o,currentFontList:n,fontFamily:t,onChange:s})=>{const a=v(()=>({fontFamily:"",searchFontValue:"",searchFontGroupList:[],fontVipTipVisible:!1,get fontGroupList(){return a.searchFontValue?a.searchFontGroupList:o}}));x.useEffect(()=>{a.fontFamily=t},[t]);async function l(i,c){const d=a.fontFamily;try{a.fontFamily=i,await s(i)}catch(u){throw a.fontFamily=d,O.error(`${c}加载失败`),u}}return e.jsxs(B,{className:m.fontFamily,value:a.fontFamily,optionLabelProp:"label",dropdownClassName:"new-select-v2",dropdownMatchSelectWidth:228,dropdownRender:i=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"searchInputBox",children:[e.jsx(h,{name:"search",fontSize:24}),e.jsx(C1,{value:a.searchFontValue,placeholder:"搜索字体",onChange:()=>{},onBlur:()=>{}})]}),a.fontGroupList.length?i:e.jsxs("div",{className:"notFond",children:[e.jsx(h,{name:"search",fontSize:64}),e.jsx("div",{children:"很抱歉，没找到您要的搜索结果"})]})]}),onChange:(i,c)=>{l(i,`${c.label||i}`)},children:[e.jsx(L,{label:"当前模板使用的字体",children:n.map(i=>e.jsx(H,{onMouseEnter:()=>{},onMouseLeave:()=>{},value:i.fontName,label:i.displayName,children:e.jsxs("div",{style:{padding:"9px 8px",display:"flex"},children:[e.jsx("img",{style:{height:"15px",marginRight:"auto"},src:i.thumbnailTextWhite,alt:""}),i.isVip==="1"?Z:null]})},`${i.fontName}current`))}),a.fontGroupList.map(i=>e.jsx(L,{label:i.name,children:i.fontList.map(c=>e.jsx(H,{onMouseEnter:()=>{},onMouseLeave:()=>{},value:c.fontName,label:c.displayName,children:e.jsxs("div",{style:{padding:"9px 8px",display:"flex"},children:[e.jsx("img",{style:{height:"15px",marginRight:"auto"},src:c.thumbnailTextWhite,alt:""}),c.isVip==="1"?Z:null]})},c.fontName))},i.id))]})});p(({textShadow:o,textStroke:n,textGlow:t,color:s,advanceStyleList:a,onChange:l,visibleChangeHandler:i})=>e.jsx(W,{placement:"bottom",title:"文字特效",overlayClassName:"componentsTextSettingsEffectPopover",onVisibleChange:c=>{i(c)},content:()=>null,children:e.jsxs("div",{children:[e.jsxs("div",{style:{display:o.length||n.length?"none":"flex"},className:m.addStyleSettingBtn,children:[e.jsx(h,{name:"plus",fontSize:20}),e.jsx("span",{children:"添加文字样式"})]}),e.jsxs("div",{style:{display:o.length||n.length?"flex":"none"},className:m.advanceStyleSettingBtn,children:[e.jsx("div",{className:m.currentAdvanceStyle,children:e.jsx(l1,{textShadow:o||[],textStroke:n||[],textGlow:t||[],color:s||"",isClear:!1})}),e.jsx("span",{className:m.advanceStyleTitle,children:"文字特效"}),e.jsx(h,{name:"chevronDownBold",fontSize:16})]})]})}));const u1=p(({localStore:o,stepStore:n,selectedLayer:t,collageInfo:s})=>null);export{x1 as F,h1 as I,u1 as T};
