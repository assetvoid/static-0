import{C as d}from"./index-DpnMnV-W.js";import{r as h,j as m}from"./index-BpkY95s5.js";import{d as u}from"./index-CsSXPTiX.js";import{n as f}from"./index-B7sgufTL.js";function g(n){const t=d(n),{width:a,height:o}=t;return{canvas:t,width:a,height:o,ctx:t.getContext("2d")}}async function C(n){var i;const{width:t,height:a}=g(n),o=(i=n==null?void 0:n.image)==null?void 0:i.imageSource;let e=document.createElement("canvas");const{createCanvas:r}={};return await w(o).then(s=>{e=r(t,a,s)}),{canvas:e,width:t,height:a}}function v(n,t){const{width:a,height:o,ctx:e}=g(n);e&&(e.clearRect(0,0,a,o),e.drawImage(t,0,0,a,o))}function w(n){return new Promise(t=>{const a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=()=>{t(a)},a.src=n})}async function I(n,t){const{canvas:a}=await C(t);v(t,a),t.image&&(t.image.imageSource=a.toDataURL(),n.filterState.candidateFilterId,n.filterState.candidateFilterId="")}async function b(n,t){const{filterBridge:a,createCanvas:o}={},e=o(n.width,n.height,n);return(await a.from(e).apply(t.id,t.zip,t.alpha)).canvas}const j=u(({min:n,max:t,value:a,tipFormatter:o,onChange:e,onAfterChange:r})=>{const[i,s]=h.useState([]);return m.jsx("div",{className:"CommonSlider",onPointerDown:()=>{s([a])},children:m.jsx(f,{min:n,max:t,value:a,tipFormatter:o,onChange:c=>{s([...i,c]),e(c)},onAfterChange:()=>{r(i[0],a),s([])}})})});export{j as C,I as c,b as g};
